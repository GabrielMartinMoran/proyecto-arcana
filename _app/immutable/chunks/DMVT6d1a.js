import"./DsnmJJEf.js";import{aF as aa,p as ta,f as b,b as f,c as ea,s as C,d as u,r as d,g as e,aG as x,t as p,a as ra,e as H,O as sa}from"./DLXWS9Me.js";import{i as I}from"./sk9sCnVa.js";import{e as na}from"./DqBPzmir.js";import{s as P}from"./YdHDDrJh.js";import{s as oa}from"./DvREelRX.js";import{p as g}from"./B0W8Y-cb.js";import{s as ia,a as ca}from"./9-vBrUj_.js";import{g as M}from"./BlEGOwK4.js";import{p as i}from"./BtKI8q5M.js";import{C as la}from"./B1b8Feyo.js";import{C as R}from"./CyC3GOE6.js";import{d as da}from"./BA7vPwHJ.js";const ma=async(m,a,s)=>{const _=await a()();s(_)},_a=async(m,a,s)=>{const _=await a()();s(_)},va=async(m,a,s)=>{e(a)&&await s()(e(a))},ua=async(m,a,s,_)=>{!e(a)||!await da.confirm(`Â¿Quieres eliminar a ${e(a).name}?`,{title:"Confirmar eliminaciÃ³n",confirmLabel:"Eliminar",cancelLabel:"Cancelar"})||(await s()(e(a)),sa(a,void 0),_(null))},ha=async(m,a,s)=>{e(a)&&await s()(e(a))};var fa=b('<button title="Importar y Editar">ğŸ“</button>'),Ca=b('<button title="Crear">â•</button> <button title="Importar">ğŸ“¥</button> <button title="Exportar">ğŸ“¤</button> <button title="Eliminar">ğŸ—‘ï¸</button>',1),ba=(m,a,s)=>a(e(s)),pa=b('<img class="character-image svelte-dk16f3"/>'),ga=b('<span class="image-placeholder svelte-dk16f3"> </span>'),Ea=b('<button><!> <span class="name svelte-dk16f3"> </span></button>'),ka=b('<section class="characters-page svelte-dk16f3"><div class="list svelte-dk16f3"><div class="header svelte-dk16f3"><!></div> <div class="content svelte-dk16f3"></div></div> <div class="viewport svelte-dk16f3"><!></div></section>');function Ra(m,a){ta(a,!0);const s=()=>ca(a.characters,"$characters",_),[_,D]=ia();let U=g(a,"onAddToMyCharacters",3,()=>{throw new Error("onAddToMyCharacters not implemented")}),B=g(a,"onCreateCharacter",3,async()=>{throw new Error("onCreateCharacter not implemented")}),G=g(a,"onImportCharacter",3,async()=>{throw new Error("onCreateCharacter not implemented")}),O=g(a,"onExportCharacter",3,async()=>{throw new Error("onCreateCharacter not implemented")}),N=g(a,"onDeleteCharacter",3,async()=>{throw new Error("onCreateCharacter not implemented")}),S=x(()=>i.url.searchParams.get("characterId")),Q=x(()=>i.url.searchParams.get("tab")??R.DEFAULT_CHARACTER_SHEET_TAB);const E=t=>{t!==null?(i.url.searchParams.set("characterId",t.id),i.url.searchParams.set("tab",R.DEFAULT_CHARACTER_SHEET_TAB)):(i.url.searchParams.delete("characterId"),i.url.searchParams.delete("tab")),M(`?${i.url.searchParams.toString()}`)},j=t=>{i.url.searchParams.set("tab",t),M(`?${i.url.searchParams.toString()}`)};let c=x(()=>s().find(t=>t.id===e(S)));const q=t=>{a.characters.update(r=>{const n=r.findIndex(o=>o.id===t.id);if(n!==-1){const o=[...r];return o[n]=t,o}return r})};var y=ka(),w=u(y),A=u(w),z=u(A);{var J=t=>{var r=fa();r.__click=[ha,c,U],p(()=>r.disabled=a.allActionsDisabled||!e(c)),f(t,r)},K=t=>{var r=Ca(),n=ra(r);n.__click=[ma,B,E];var o=C(n,2);o.__click=[_a,G,E];var h=C(o,2);h.__click=[va,c,O];var k=C(h,2);k.__click=[ua,c,N,E],p(()=>{n.disabled=a.allActionsDisabled,o.disabled=a.allActionsDisabled,h.disabled=a.allActionsDisabled||!e(c),k.disabled=a.allActionsDisabled||!e(c)}),f(t,r)};I(z,t=>{a.readonly?t(J):t(K,!1)})}d(A);var L=C(A,2);na(L,5,s,t=>t.id,(t,r)=>{var n=Ea();let o;n.__click=[ba,E,r];var h=u(n);{var k=l=>{var v=pa();p(()=>{P(v,"src",e(r).img),P(v,"alt",e(r).name)}),f(l,v)},X=l=>{var v=ga(),Z=u(v,!0);d(v),p($=>H(Z,$),[()=>e(r).name.charAt(0).toUpperCase()]),f(l,v)};I(h,l=>{e(r).img?l(k):l(X,!1)})}var T=C(h,2),Y=u(T,!0);d(T),d(n),p(l=>{o=oa(n,1,"character-item svelte-dk16f3",null,o,l),P(T,"title",e(r).name),H(Y,e(r).name)},[()=>({selected:e(S)===e(r).id})]),f(t,n)}),d(L),d(w);var F=C(w,2),V=u(F);{var W=t=>{la(t,{get character(){return e(c)},get readonly(){return a.readonly},onChange:q,get currentTab(){return e(Q)},onTabChange:j})};I(V,t=>{e(c)&&t(W)})}d(F),d(y),f(m,y),ea(),D()}aa(["click"]);export{Ra as C};
