import"./DsnmJJEf.js";import{p as da,f as m,d as e,r as t,s,t as y,e as l,b as _,c as _a,aF as Pa,b2 as la,g}from"./DLXWS9Me.js";import{i as p}from"./sk9sCnVa.js";import{e as A}from"./DqBPzmir.js";import{s as ua}from"./YdHDDrJh.js";import{a as Ua,d as Oa}from"./Cf74FySC.js";import{d as Ga}from"./BA7vPwHJ.js";import{b as Ha,l as Va}from"./BQL_5efD.js";import{C as V}from"./CyC3GOE6.js";import{r as ga}from"./C9C7sEQ-.js";import{m as Ya}from"./DZAtAn7e.js";import{w as Ba,g as Ja}from"./0JtrQ17s.js";var Ka=m('<div class="action"><strong> </strong> <span> </span></div>');function G(x,a){da(a,!0);var u=Ka(),f=e(u),b=e(f);t(f);var z=s(f,2),R=e(z,!0);t(z),t(u),y(()=>{l(b,`${a.action.name??""}
		${a.action.uses?`(${a.action.uses.type=="USES"?`${a.action.uses.qty} ${a.action.uses.qty===1?"uso":"usos"}`:`Recarga ${a.action.uses.qty}+`})`:""}:`),l(R,a.action.detail)}),_(x,u),_a()}const Qa=async(x,a)=>{try{const u=a.creature&&(a.creature.id??a.creature.name)||null;if(!u)return;const f=ga(`/embedded/bestiary/${u}`);await navigator.clipboard.writeText(window.location.origin+f),await Ga.alert("Se copi칩 el enlace embebido de la criatura al portapapeles.")}catch(u){console.warn("[statblock] failed to copy URL",u)}};var Wa=(x,a,u)=>a(`1d8e+${V.ATTR_NAME_MAP[u]}`,Ha(V.ATTR_NAME_MAP[u])),Xa=m('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div>'),Za=(x,a)=>a("1d8e+reflejos","Iniciativa"),$a=m("<li><strong> </strong> <span> </span></li>"),at=m('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),tt=(x,a,u)=>a(g(u)),et=(x,a,u)=>a(g(u)),rt=m('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),st=m('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),it=m("<li><!></li>"),vt=m('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),nt=m("<li><!></li>"),ot=m('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),ct=m("<li><!></li>"),lt=m('<div class="actions"><strong>Interacciones</strong> <ul></ul></div>'),ut=m('<div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div>'),dt=m('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span class="spacer svelte-2zpvir"></span> <span><strong>Rango</strong> <span> </span></span> <div class="header-actions svelte-2zpvir"><button title="Copiar enlace embebido">游댕</button></div></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n F칤sica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n M치gica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span><!></span></div> <!> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <!></div></div></div>');function Ct(x,a){da(a,!0);let{rollModal:u,rollExpression:f}=Ua();const b=(r,i)=>{const v={Cuerpo:a.creature.attributes.body,Reflejos:a.creature.attributes.reflexes,Mente:a.creature.attributes.mind,Instinto:a.creature.attributes.instinct,Presencia:a.creature.attributes.presence,Iniciativa:a.creature.attributes.reflexes};for(const n of Object.keys(v))v[n.toLowerCase()]=v[n];u.openRollModal({expression:r,variables:v,title:`${a.creature.name}: ${i}`})},z=r=>{b(`1d8e+${r.bonus}`,`Ataca con ${r.name}`)},R=r=>{const i=Oa(r.damage);f({expression:i,title:`${a.creature.name}: Da침o de ${r.name}`})};var S=dt(),Y=s(e(S),2),k=e(Y),E=e(k),ma=e(E,!0);t(E);var T=s(E,4),B=s(e(T),2),ba=e(B,!0);t(B),t(T);var J=s(T,2),fa=e(J);fa.__click=[Qa,a],t(J),t(k);var I=s(k,2);A(I,20,()=>["body","reflexes","mind","instinct","presence"],r=>r,(r,i)=>{var v=Xa(),n=e(v),c=e(n,!0);t(n);var o=s(n,2),d=e(o),C=e(d,!0);t(d);var h=s(d,2);h.__click=[Wa,b,i],t(o),t(v),y(()=>{l(c,V.ATTR_NAME_MAP[i]),l(C,a.creature.attributes[i])}),_(r,v)}),t(I);var L=s(I,2),q=e(L),K=s(e(q),2),xa=e(K,!0);t(K),t(q);var D=s(q,2),Q=s(e(D),2),za=e(Q);t(Q),t(D);var N=s(D,2),W=s(e(N),2),ha=e(W);t(W),t(N);var j=s(N,2),X=s(e(j),2),pa=e(X);t(X),t(j);var F=s(j,2),Z=s(e(F),2),ya=e(Z);t(Z),t(F);var $=s(F,2),aa=s(e($),2),P=e(aa),Ma=e(P,!0);t(P);var Aa=s(P,2);Aa.__click=[Za,b],t(aa),t($),t(L);var ta=s(L,2),U=e(ta),O=e(U),ea=s(e(O),2),Ca=e(ea);{var wa=r=>{var i=la();y(v=>l(i,v),[()=>a.creature.languages.join(", ")]),_(r,i)},Ra=r=>{var i=la("Ninguna");_(r,i)};p(Ca,r=>{a.creature.languages.length>0?r(wa):r(Ra,!1)})}t(ea),t(O);var ra=s(O,2);{var Sa=r=>{var i=at(),v=s(e(i),2);A(v,21,()=>a.creature.traits,n=>n.name,(n,c)=>{var o=$a(),d=e(o),C=e(d);t(d);var h=s(d,2),M=e(h,!0);t(h),t(o),y(()=>{l(C,`${g(c).name??""}:`),l(M,g(c).detail)}),_(n,o)}),t(v),t(i),_(r,i)};p(ra,r=>{a.creature.traits.length>0&&r(Sa)})}var sa=s(ra,2);{var ka=r=>{var i=st(),v=s(e(i),2);A(v,21,()=>a.creature.attacks,n=>n.name,(n,c)=>{var o=rt(),d=e(o),C=e(d,!0);t(d);var h=s(d,2),M=e(h);M.__click=[tt,z,c];var Na=e(M);t(M);var w=s(M,2);w.__click=[et,R,c];var ja=e(w);t(w);var Fa=s(w,1,!0);t(h),t(o),y(()=>{l(C,g(c).name),l(Na,`${(g(c).bonus>0?"+"+g(c).bonus:g(c).bonus)??""} 游꿢`),l(ja,`${g(c).damage??""} 游눤`),l(Fa,g(c).note?g(c).note:"")}),_(n,o)}),t(v),t(i),_(r,i)};p(sa,r=>{a.creature.attacks.length>0&&r(ka)})}var ia=s(sa,2);{var Ea=r=>{var i=vt(),v=s(e(i),2);A(v,21,()=>a.creature.actions,n=>n.name,(n,c)=>{var o=it(),d=e(o);G(d,{get action(){return g(c)}}),t(o),_(n,o)}),t(v),t(i),_(r,i)};p(ia,r=>{a.creature.actions.length>0&&r(Ea)})}var va=s(ia,2);{var Ta=r=>{var i=ot(),v=s(e(i),2);A(v,21,()=>a.creature.reactions,n=>n.name,(n,c)=>{var o=nt(),d=e(o);G(d,{get action(){return g(c)}}),t(o),_(n,o)}),t(v),t(i),_(r,i)};p(va,r=>{a.creature.reactions.length>0&&r(Ta)})}var na=s(va,2);{var Ia=r=>{var i=lt(),v=s(e(i),2);A(v,21,()=>a.creature.interactions,n=>n.name,(n,c)=>{var o=ct(),d=e(o);G(d,{get action(){return g(c)}}),t(o),_(n,o)}),t(v),t(i),_(r,i)};p(na,r=>{a.creature.interactions.length>0&&r(Ia)})}var oa=s(na,2),ca=s(e(oa),2),La=e(ca,!0);t(ca),t(oa),t(U);var qa=s(U,2);{var Da=r=>{var i=ut(),v=e(i);t(i),y(()=>{ua(v,"src",a.creature.img),ua(v,"alt",a.creature.name)}),_(r,i)};p(qa,r=>{a.creature.img&&r(Da)})}t(ta),t(Y),t(S),y(()=>{l(ma,a.creature.name),l(ba,a.creature.tier),l(xa,a.creature.stats.maxHealth),l(za,`${a.creature.stats.evasion.value??""}${a.creature.stats.evasion.note?` (${a.creature.stats.evasion.note})`:""}`),l(ha,`${a.creature.stats.physicalMitigation.value??""}${a.creature.stats.physicalMitigation.note?` (${a.creature.stats.physicalMitigation.note})`:""}`),l(pa,`${a.creature.stats.magicalMitigation.value??""}${a.creature.stats.magicalMitigation.note?` (${a.creature.stats.magicalMitigation.note})`:""}`),l(ya,`${a.creature.stats.speed.value??""}${a.creature.stats.speed.note?` (${a.creature.stats.speed.note})`:""}`),l(Ma,a.creature.attributes.reflexes),l(La,a.creature.behavior)}),_(x,S),_a()}Pa(["click"]);const H=Ba([]),wt=()=>({loadCreatures:async()=>{if(Ja(H).length>0)return;const u=await(await fetch(ga("/docs/bestiary.yml"))).text();let f=[];try{f=Va(u).creatures??[]}catch(b){console.error("Error parsing YAML:",b)}H.set(f.map(b=>Ya(b)).toSorted((b,z)=>b.tier-z.tier||b.name.localeCompare(z.name)))},creatures:H});export{Ct as S,wt as u};
