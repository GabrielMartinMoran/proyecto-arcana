import"./DsnmJJEf.js";import{p as ga,f as m,d as e,r as t,s,t as y,e as c,b as _,c as ma,aF as Ga,b2 as da,g}from"./DLXWS9Me.js";import{i as p}from"./sk9sCnVa.js";import{e as A}from"./DqBPzmir.js";import{s as _a}from"./YdHDDrJh.js";import{r as ba}from"./BFJSMdkz.js";import{d as Ha}from"./BA7vPwHJ.js";import{a as Va,d as Ya}from"./D4lDmc_j.js";import{b as Ba,l as Ja}from"./BQL_5efD.js";import{C as Y}from"./B_ycimPA.js";import{m as Ka}from"./DZAtAn7e.js";import{w as Qa,g as Wa}from"./0JtrQ17s.js";var Xa=m('<div class="action"><strong> </strong> <span> </span></div>');function H(x,a){ga(a,!0);var u=Xa(),f=e(u),b=e(f);t(f);var z=s(f,2),R=e(z,!0);t(z),t(u),y(()=>{c(b,`${a.action.name??""}
		${a.action.uses?`(${a.action.uses.type=="USES"?`${a.action.uses.qty} ${a.action.uses.qty===1?"uso":"usos"}`:`Recarga ${a.action.uses.qty}+`})`:""}:`),c(R,a.action.detail)}),_(x,u),ma()}const Za=async(x,a)=>{try{const u=a.creature&&(a.creature.id??a.creature.name)||null;if(!u)return;const f=ba(`/embedded/bestiary/${u}`);await navigator.clipboard.writeText(window.location.origin+f),await Ha.alert("Se copi칩 el enlace embebido de la criatura al portapapeles.")}catch(u){console.warn("[statblock] failed to copy URL",u)}};var $a=(x,a,u)=>a(`1d8e+${Y.ATTR_NAME_MAP[u]}`,Ba(Y.ATTR_NAME_MAP[u])),at=m('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div>'),tt=(x,a)=>a("1d8e+reflejos","Iniciativa"),et=m("<li><strong> </strong> <span> </span></li>"),rt=m('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),st=(x,a,u)=>a(g(u)),it=(x,a,u)=>a(g(u)),vt=m('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),nt=m('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),ot=m("<li><!></li>"),ct=m('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),lt=m("<li><!></li>"),ut=m('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),dt=m("<li><!></li>"),_t=m('<div class="actions"><strong>Interacciones</strong> <ul></ul></div>'),gt=m('<div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div>'),mt=m('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span class="spacer svelte-2zpvir"></span> <span><strong><span> </span>, <span>Rango</span> <span> </span></strong></span> <div class="header-actions svelte-2zpvir"><button title="Copiar enlace embebido">游댕</button></div></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n F칤sica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n M치gica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span><!></span></div> <!> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <!></div></div></div>');function St(x,a){ga(a,!0);let{rollModal:u,rollExpression:f}=Va();const b=(r,i)=>{const v={Cuerpo:a.creature.attributes.body,Reflejos:a.creature.attributes.reflexes,Mente:a.creature.attributes.mind,Instinto:a.creature.attributes.instinct,Presencia:a.creature.attributes.presence,Iniciativa:a.creature.attributes.reflexes};for(const n of Object.keys(v))v[n.toLowerCase()]=v[n];u.openRollModal({expression:r,variables:v,title:`${a.creature.name}: ${i}`})},z=r=>{b(`1d8e+${r.bonus}`,`Ataca con ${r.name}`)},R=r=>{const i=Ya(r.damage);f({expression:i,title:`${a.creature.name}: Da침o de ${r.name}`})};var S=mt(),B=s(e(S),2),k=e(B),E=e(k),fa=e(E,!0);t(E);var T=s(E,4),J=e(T),I=e(J),xa=e(I,!0);t(I);var K=s(I,4),za=e(K,!0);t(K),t(J),t(T);var Q=s(T,2),ha=e(Q);ha.__click=[Za,a],t(Q),t(k);var L=s(k,2);A(L,20,()=>["body","reflexes","mind","instinct","presence"],r=>r,(r,i)=>{var v=at(),n=e(v),l=e(n,!0);t(n);var o=s(n,2),d=e(o),C=e(d,!0);t(d);var h=s(d,2);h.__click=[$a,b,i],t(o),t(v),y(()=>{c(l,Y.ATTR_NAME_MAP[i]),c(C,a.creature.attributes[i])}),_(r,v)}),t(L);var q=s(L,2),D=e(q),W=s(e(D),2),pa=e(W,!0);t(W),t(D);var N=s(D,2),X=s(e(N),2),ya=e(X);t(X),t(N);var j=s(N,2),Z=s(e(j),2),Ma=e(Z);t(Z),t(j);var F=s(j,2),$=s(e(F),2),Aa=e($);t($),t(F);var P=s(F,2),aa=s(e(P),2),Ca=e(aa);t(aa),t(P);var ta=s(P,2),ea=s(e(ta),2),U=e(ea),wa=e(U,!0);t(U);var Ra=s(U,2);Ra.__click=[tt,b],t(ea),t(ta),t(q);var ra=s(q,2),O=e(ra),G=e(O),sa=s(e(G),2),Sa=e(sa);{var ka=r=>{var i=da();y(v=>c(i,v),[()=>a.creature.languages.join(", ")]),_(r,i)},Ea=r=>{var i=da("Ninguna");_(r,i)};p(Sa,r=>{a.creature.languages.length>0?r(ka):r(Ea,!1)})}t(sa),t(G);var ia=s(G,2);{var Ta=r=>{var i=rt(),v=s(e(i),2);A(v,21,()=>a.creature.traits,n=>n.name,(n,l)=>{var o=et(),d=e(o),C=e(d);t(d);var h=s(d,2),M=e(h,!0);t(h),t(o),y(()=>{c(C,`${g(l).name??""}:`),c(M,g(l).detail)}),_(n,o)}),t(v),t(i),_(r,i)};p(ia,r=>{a.creature.traits.length>0&&r(Ta)})}var va=s(ia,2);{var Ia=r=>{var i=nt(),v=s(e(i),2);A(v,21,()=>a.creature.attacks,n=>n.name,(n,l)=>{var o=vt(),d=e(o),C=e(d,!0);t(d);var h=s(d,2),M=e(h);M.__click=[st,z,l];var Pa=e(M);t(M);var w=s(M,2);w.__click=[it,R,l];var Ua=e(w);t(w);var Oa=s(w,1,!0);t(h),t(o),y(()=>{c(C,g(l).name),c(Pa,`${(g(l).bonus>0?"+"+g(l).bonus:g(l).bonus)??""} 游꿢`),c(Ua,`${g(l).damage??""} 游눤`),c(Oa,g(l).note?g(l).note:"")}),_(n,o)}),t(v),t(i),_(r,i)};p(va,r=>{a.creature.attacks.length>0&&r(Ia)})}var na=s(va,2);{var La=r=>{var i=ct(),v=s(e(i),2);A(v,21,()=>a.creature.actions,n=>n.name,(n,l)=>{var o=ot(),d=e(o);H(d,{get action(){return g(l)}}),t(o),_(n,o)}),t(v),t(i),_(r,i)};p(na,r=>{a.creature.actions.length>0&&r(La)})}var oa=s(na,2);{var qa=r=>{var i=ut(),v=s(e(i),2);A(v,21,()=>a.creature.reactions,n=>n.name,(n,l)=>{var o=lt(),d=e(o);H(d,{get action(){return g(l)}}),t(o),_(n,o)}),t(v),t(i),_(r,i)};p(oa,r=>{a.creature.reactions.length>0&&r(qa)})}var ca=s(oa,2);{var Da=r=>{var i=_t(),v=s(e(i),2);A(v,21,()=>a.creature.interactions,n=>n.name,(n,l)=>{var o=dt(),d=e(o);H(d,{get action(){return g(l)}}),t(o),_(n,o)}),t(v),t(i),_(r,i)};p(ca,r=>{a.creature.interactions.length>0&&r(Da)})}var la=s(ca,2),ua=s(e(la),2),Na=e(ua,!0);t(ua),t(la),t(O);var ja=s(O,2);{var Fa=r=>{var i=gt(),v=e(i);t(i),y(()=>{_a(v,"src",a.creature.img),_a(v,"alt",a.creature.name)}),_(r,i)};p(ja,r=>{a.creature.img&&r(Fa)})}t(ra),t(B),t(S),y(()=>{c(fa,a.creature.name),c(xa,a.creature.lineage),c(za,a.creature.tier),c(pa,a.creature.stats.maxHealth),c(ya,`${a.creature.stats.evasion.value??""}${a.creature.stats.evasion.note?` (${a.creature.stats.evasion.note})`:""}`),c(Ma,`${a.creature.stats.physicalMitigation.value??""}${a.creature.stats.physicalMitigation.note?` (${a.creature.stats.physicalMitigation.note})`:""}`),c(Aa,`${a.creature.stats.magicalMitigation.value??""}${a.creature.stats.magicalMitigation.note?` (${a.creature.stats.magicalMitigation.note})`:""}`),c(Ca,`${a.creature.stats.speed.value??""}${a.creature.stats.speed.note?` (${a.creature.stats.speed.note})`:""}`),c(wa,a.creature.attributes.reflexes),c(Na,a.creature.behavior)}),_(x,S),ma()}Ga(["click"]);const V=Qa([]),kt=()=>({loadCreatures:async()=>{if(Wa(V).length>0)return;const u=await(await fetch(ba("/docs/bestiary.yml"))).text();let f=[];try{f=Ja(u).creatures??[]}catch(b){console.error("Error parsing YAML:",b)}V.set(f.map(b=>Ka(b)).toSorted((b,z)=>b.tier-z.tier||b.name.localeCompare(z.name)))},creatures:V});export{St as S,kt as u};
