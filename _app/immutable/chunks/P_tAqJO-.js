import"./DsnmJJEf.js";import{p as ua,b as m,e,r as t,g as i,t as h,a as _,d as da,aq as la,j as g}from"./Cg1s0EoG.js";import{s as c,d as Da}from"./DDMpRfKd.js";import{i as z}from"./MZe84WCl.js";import{e as y,s as ca}from"./CSZ0gJPW.js";import{a as Pa,d as Ua}from"./CCuMvpnY.js";import{c as Fa}from"./CGjaQNWU.js";import{C as H}from"./CyC3GOE6.js";import{r as Oa}from"./fKIMi0cH.js";var Ga=m('<div class="action"><strong> </strong> <span> </span></div>');function G(b,a){ua(a,!0);var u=Ga(),f=e(u),A=e(f);t(f);var R=i(f,2),T=e(R,!0);t(R),t(u),h(()=>{c(A,`${a.action.name??""}
		${a.action.uses?`(${a.action.uses.type=="USES"?`${a.action.uses.qty} ${a.action.uses.qty===1?"uso":"usos"}`:`Recarga ${a.action.uses.qty}+`})`:""}:`),c(T,a.action.detail)}),_(b,u),da()}const Ha=(b,a)=>{try{const u=a.creature&&(a.creature.id??a.creature.name)||null;if(!u)return;const f=Oa(`/embedded/bestiary/${u}`);navigator.clipboard.writeText(window.location.origin+f),alert("Se copi칩 el enlace embebido de la criatura al portapapeles.")}catch(u){console.warn("[statblock] failed to copy URL",u)}};var Va=(b,a,u)=>a(`1d8e+${H.ATTR_NAME_MAP[u]}`,Fa(H.ATTR_NAME_MAP[u])),Ba=m('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div>'),Ja=(b,a)=>a("1d8e+reflejos","Iniciativa"),Ka=m("<li><strong> </strong> <span> </span></li>"),Qa=m('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),Wa=(b,a,u)=>a(g(u)),Xa=(b,a,u)=>a(g(u)),Ya=m('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),Za=m('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),$a=m("<li><!></li>"),at=m('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),tt=m("<li><!></li>"),et=m('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),rt=m("<li><!></li>"),it=m('<div class="actions"><strong>Interacciones</strong> <ul></ul></div>'),st=m('<div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div>'),vt=m('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span class="spacer svelte-2zpvir"></span> <span><strong>Rango</strong> <span> </span></span> <div class="header-actions svelte-2zpvir"><button title="Copiar enlace embebido">游댕</button></div></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n F칤sica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n M치gica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span><!></span></div> <!> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <!></div></div></div>');function bt(b,a){ua(a,!0);let{rollModal:u,rollExpression:f}=Pa();const A=(r,s)=>{const v={Cuerpo:a.creature.attributes.body,Reflejos:a.creature.attributes.reflexes,Mente:a.creature.attributes.mind,Instinto:a.creature.attributes.instinct,Presencia:a.creature.attributes.presence,Iniciativa:a.creature.attributes.reflexes};for(const n of Object.keys(v))v[n.toLowerCase()]=v[n];u.openRollModal({expression:r,variables:v,title:`${a.creature.name}: ${s}`})},R=r=>{A(`1d8e+${r.bonus}`,`Ataca con ${r.name}`)},T=r=>{const s=Ua(r.damage);f({expression:s,title:`${a.creature.name}: Da침o de ${r.name}`})};var C=vt(),V=i(e(C),2),E=e(V),S=e(E),_a=e(S,!0);t(S);var q=i(S,4),B=i(e(q),2),ga=e(B,!0);t(B),t(q);var J=i(q,2),ma=e(J);ma.__click=[Ha,a],t(J),t(E);var I=i(E,2);y(I,20,()=>["body","reflexes","mind","instinct","presence"],r=>r,(r,s)=>{var v=Ba(),n=e(v),l=e(n,!0);t(n);var o=i(n,2),d=e(o),p=e(d,!0);t(d);var x=i(d,2);x.__click=[Va,A,s],t(o),t(v),h(()=>{c(l,H.ATTR_NAME_MAP[s]),c(p,a.creature.attributes[s])}),_(r,v)}),t(I);var j=i(I,2),w=e(j),K=i(e(w),2),ba=e(K,!0);t(K),t(w);var L=i(w,2),Q=i(e(L),2),fa=e(Q);t(Q),t(L);var N=i(L,2),W=i(e(N),2),xa=e(W);t(W),t(N);var D=i(N,2),X=i(e(D),2),za=e(X);t(X),t(D);var P=i(D,2),Y=i(e(P),2),ha=e(Y);t(Y),t(P);var Z=i(P,2),$=i(e(Z),2),U=e($),Ma=e(U,!0);t(U);var ya=i(U,2);ya.__click=[Ja,A],t($),t(Z),t(j);var aa=i(j,2),F=e(aa),O=e(F),ta=i(e(O),2),Aa=e(ta);{var pa=r=>{var s=la();h(v=>c(s,v),[()=>a.creature.languages.join(", ")]),_(r,s)},Ra=r=>{var s=la("Ninguna");_(r,s)};z(Aa,r=>{a.creature.languages.length>0?r(pa):r(Ra,!1)})}t(ta),t(O);var ea=i(O,2);{var ka=r=>{var s=Qa(),v=i(e(s),2);y(v,21,()=>a.creature.traits,n=>n.name,(n,l)=>{var o=Ka(),d=e(o),p=e(d);t(d);var x=i(d,2),M=e(x,!0);t(x),t(o),h(()=>{c(p,`${g(l).name??""}:`),c(M,g(l).detail)}),_(n,o)}),t(v),t(s),_(r,s)};z(ea,r=>{a.creature.traits.length>0&&r(ka)})}var ra=i(ea,2);{var Ta=r=>{var s=Za(),v=i(e(s),2);y(v,21,()=>a.creature.attacks,n=>n.name,(n,l)=>{var o=Ya(),d=e(o),p=e(d,!0);t(d);var x=i(d,2),M=e(x);M.__click=[Wa,R,l];var wa=e(M);t(M);var k=i(M,2);k.__click=[Xa,T,l];var La=e(k);t(k);var Na=i(k,1,!0);t(x),t(o),h(()=>{c(p,g(l).name),c(wa,`${(g(l).bonus>0?"+"+g(l).bonus:g(l).bonus)??""} 游꿢`),c(La,`${g(l).damage??""} 游눤`),c(Na,g(l).note?g(l).note:"")}),_(n,o)}),t(v),t(s),_(r,s)};z(ra,r=>{a.creature.attacks.length>0&&r(Ta)})}var ia=i(ra,2);{var Ca=r=>{var s=at(),v=i(e(s),2);y(v,21,()=>a.creature.actions,n=>n.name,(n,l)=>{var o=$a(),d=e(o);G(d,{get action(){return g(l)}}),t(o),_(n,o)}),t(v),t(s),_(r,s)};z(ia,r=>{a.creature.actions.length>0&&r(Ca)})}var sa=i(ia,2);{var Ea=r=>{var s=et(),v=i(e(s),2);y(v,21,()=>a.creature.reactions,n=>n.name,(n,l)=>{var o=tt(),d=e(o);G(d,{get action(){return g(l)}}),t(o),_(n,o)}),t(v),t(s),_(r,s)};z(sa,r=>{a.creature.reactions.length>0&&r(Ea)})}var va=i(sa,2);{var Sa=r=>{var s=it(),v=i(e(s),2);y(v,21,()=>a.creature.interactions,n=>n.name,(n,l)=>{var o=rt(),d=e(o);G(d,{get action(){return g(l)}}),t(o),_(n,o)}),t(v),t(s),_(r,s)};z(va,r=>{a.creature.interactions.length>0&&r(Sa)})}var na=i(va,2),oa=i(e(na),2),qa=e(oa,!0);t(oa),t(na),t(F);var Ia=i(F,2);{var ja=r=>{var s=st(),v=e(s);t(s),h(()=>{ca(v,"src",a.creature.img),ca(v,"alt",a.creature.name)}),_(r,s)};z(Ia,r=>{a.creature.img&&r(ja)})}t(aa),t(V),t(C),h(()=>{c(_a,a.creature.name),c(ga,a.creature.tier),c(ba,a.creature.stats.maxHealth),c(fa,`${a.creature.stats.evasion.value??""}${a.creature.stats.evasion.note?` (${a.creature.stats.evasion.note})`:""}`),c(xa,`${a.creature.stats.physicalMitigation.value??""}${a.creature.stats.physicalMitigation.note?` (${a.creature.stats.physicalMitigation.note})`:""}`),c(za,`${a.creature.stats.magicalMitigation.value??""}${a.creature.stats.magicalMitigation.note?` (${a.creature.stats.magicalMitigation.note})`:""}`),c(ha,`${a.creature.stats.speed.value??""}${a.creature.stats.speed.note?` (${a.creature.stats.speed.note})`:""}`),c(Ma,a.creature.attributes.reflexes),c(qa,a.creature.behavior)}),_(b,C),da()}Da(["click"]);export{bt as S};
