import"./DsnmJJEf.js";import{p as aa,b as C,a as f,d as ta,g as b,e as v,r as d,j as e,ab as x,t as p,f as ea,K as ra}from"./t0Cq7XZL.js";import{d as sa,s as R}from"./D_zjkKVN.js";import{i as I,s as na,a as oa}from"./D0TQ-FGB.js";import{e as ia,s as P}from"./BDY9aIh_.js";import{s as ca}from"./BmU-s7xp.js";import{p as g}from"./DSONwV3i.js";import{g as U}from"./CmL3Knf_.js";import{p as i}from"./3F_6llsN.js";import{C as la}from"./D3NZcGt-.js";import{C as F}from"./CyC3GOE6.js";const da=async(m,a,s)=>{const _=await a()();s(_)},ma=async(m,a,s)=>{const _=await a()();s(_)},_a=async(m,a,s)=>{e(a)&&await s()(e(a))},ua=async(m,a,s,_)=>{!e(a)||!confirm(`Â¿Quieres eliminar a ${e(a).name}?`)||(await s()(e(a)),ra(a,void 0),_(null))},va=async(m,a,s)=>{e(a)&&await s()(e(a))};var ha=C('<button title="Importar y Editar">ğŸ“</button>'),fa=C('<button title="Crear">â•</button> <button title="Importar">ğŸ“¥</button> <button title="Exportar">ğŸ“¤</button> <button title="Eliminar">ğŸ—‘ï¸</button>',1),ba=(m,a,s)=>a(e(s)),Ca=C('<img class="character-image svelte-dk16f3"/>'),pa=C('<span class="image-placeholder svelte-dk16f3"> </span>'),ga=C('<button><!> <span class="name svelte-dk16f3"> </span></button>'),ka=C('<section class="characters-page svelte-dk16f3"><div class="list svelte-dk16f3"><div class="header svelte-dk16f3"><!></div> <div class="content svelte-dk16f3"></div></div> <div class="viewport svelte-dk16f3"><!></div></section>');function Ma(m,a){aa(a,!0);const s=()=>oa(a.characters,"$characters",_),[_,D]=na();let L=g(a,"onAddToMyCharacters",3,()=>{throw new Error("onAddToMyCharacters not implemented")}),B=g(a,"onCreateCharacter",3,async()=>{throw new Error("onCreateCharacter not implemented")}),j=g(a,"onImportCharacter",3,async()=>{throw new Error("onCreateCharacter not implemented")}),G=g(a,"onExportCharacter",3,async()=>{throw new Error("onCreateCharacter not implemented")}),K=g(a,"onDeleteCharacter",3,async()=>{throw new Error("onCreateCharacter not implemented")}),S=x(()=>i.url.searchParams.get("characterId")),N=x(()=>i.url.searchParams.get("tab")??F.DEFAULT_CHARACTER_SHEET_TAB);const k=t=>{t!==null?(i.url.searchParams.set("characterId",t.id),i.url.searchParams.set("tab",F.DEFAULT_CHARACTER_SHEET_TAB)):(i.url.searchParams.delete("characterId"),i.url.searchParams.delete("tab")),U(`?${i.url.searchParams.toString()}`)},O=t=>{i.url.searchParams.set("tab",t),U(`?${i.url.searchParams.toString()}`)};let c=x(()=>s().find(t=>t.id===e(S)));const Q=t=>{a.characters.update(r=>{const n=r.findIndex(o=>o.id===t.id);if(n!==-1){const o=[...r];return o[n]=t,o}return r})};var E=ka(),A=v(E),w=v(A),q=v(w);{var z=t=>{var r=ha();r.__click=[va,c,L],p(()=>r.disabled=a.allActionsDisabled||!e(c)),f(t,r)},J=t=>{var r=fa(),n=ea(r);n.__click=[da,B,k];var o=b(n,2);o.__click=[ma,j,k];var h=b(o,2);h.__click=[_a,c,G];var y=b(h,2);y.__click=[ua,c,K,k],p(()=>{n.disabled=a.allActionsDisabled,o.disabled=a.allActionsDisabled,h.disabled=a.allActionsDisabled||!e(c),y.disabled=a.allActionsDisabled||!e(c)}),f(t,r)};I(q,t=>{a.readonly?t(z):t(J,!1)})}d(w);var H=b(w,2);ia(H,5,s,t=>t.id,(t,r)=>{var n=ga();let o;n.__click=[ba,k,r];var h=v(n);{var y=l=>{var u=Ca();p(()=>{P(u,"src",e(r).img),P(u,"alt",e(r).name)}),f(l,u)},X=l=>{var u=pa(),Z=v(u,!0);d(u),p($=>R(Z,$),[()=>e(r).name.charAt(0).toUpperCase()]),f(l,u)};I(h,l=>{e(r).img?l(y):l(X,!1)})}var T=b(h,2),Y=v(T,!0);d(T),d(n),p(l=>{o=ca(n,1,"character-item svelte-dk16f3",null,o,l),P(T,"title",e(r).name),R(Y,e(r).name)},[()=>({selected:e(S)===e(r).id})]),f(t,n)}),d(H),d(A);var M=b(A,2),V=v(M);{var W=t=>{la(t,{get character(){return e(c)},get readonly(){return a.readonly},onChange:Q,get currentTab(){return e(N)},onTabChange:O})};I(V,t=>{e(c)&&t(W)})}d(M),d(E),f(m,E),ta(),D()}sa(["click"]);export{Ma as C};
