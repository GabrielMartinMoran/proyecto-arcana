import"./DsnmJJEf.js";import{p as da,b as m,e,r as t,g as s,t as M,a as _,d as _a,aq as la,h as g}from"./Cx9SZC40.js";import{s as l,d as Ua}from"./FRtchhGd.js";import{i as p}from"./BQQjEHXb.js";import{e as A,s as ua}from"./y3PUPQak.js";import{a as Fa,d as Oa}from"./CA8AbV1Z.js";import{b as Ga,l as Ha}from"./BQL_5efD.js";import{C as V}from"./CyC3GOE6.js";import{r as ga}from"./C9G-n_N2.js";import{m as Va}from"./DZAtAn7e.js";import{w as Ya,g as Ba}from"./nYHX28hn.js";var Ja=m('<div class="action"><strong> </strong> <span> </span></div>');function G(x,a){da(a,!0);var u=Ja(),f=e(u),b=e(f);t(f);var h=s(f,2),w=e(h,!0);t(h),t(u),M(()=>{l(b,`${a.action.name??""}
		${a.action.uses?`(${a.action.uses.type=="USES"?`${a.action.uses.qty} ${a.action.uses.qty===1?"uso":"usos"}`:`Recarga ${a.action.uses.qty}+`})`:""}:`),l(w,a.action.detail)}),_(x,u),_a()}const Ka=(x,a)=>{try{const u=a.creature&&(a.creature.id??a.creature.name)||null;if(!u)return;const f=ga(`/embedded/bestiary/${u}`);navigator.clipboard.writeText(window.location.origin+f),alert("Se copi칩 el enlace embebido de la criatura al portapapeles.")}catch(u){console.warn("[statblock] failed to copy URL",u)}};var Qa=(x,a,u)=>a(`1d8e+${V.ATTR_NAME_MAP[u]}`,Ga(V.ATTR_NAME_MAP[u])),Wa=m('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div>'),Xa=(x,a)=>a("1d8e+reflejos","Iniciativa"),Za=m("<li><strong> </strong> <span> </span></li>"),$a=m('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),at=(x,a,u)=>a(g(u)),tt=(x,a,u)=>a(g(u)),et=m('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),rt=m('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),st=m("<li><!></li>"),it=m('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),vt=m("<li><!></li>"),nt=m('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),ot=m("<li><!></li>"),ct=m('<div class="actions"><strong>Interacciones</strong> <ul></ul></div>'),lt=m('<div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div>'),ut=m('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span class="spacer svelte-2zpvir"></span> <span><strong>Rango</strong> <span> </span></span> <div class="header-actions svelte-2zpvir"><button title="Copiar enlace embebido">游댕</button></div></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n F칤sica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n M치gica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span><!></span></div> <!> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <!></div></div></div>');function yt(x,a){da(a,!0);let{rollModal:u,rollExpression:f}=Fa();const b=(r,i)=>{const v={Cuerpo:a.creature.attributes.body,Reflejos:a.creature.attributes.reflexes,Mente:a.creature.attributes.mind,Instinto:a.creature.attributes.instinct,Presencia:a.creature.attributes.presence,Iniciativa:a.creature.attributes.reflexes};for(const n of Object.keys(v))v[n.toLowerCase()]=v[n];u.openRollModal({expression:r,variables:v,title:`${a.creature.name}: ${i}`})},h=r=>{b(`1d8e+${r.bonus}`,`Ataca con ${r.name}`)},w=r=>{const i=Oa(r.damage);f({expression:i,title:`${a.creature.name}: Da침o de ${r.name}`})};var S=ut(),Y=s(e(S),2),k=e(Y),E=e(k),ma=e(E,!0);t(E);var T=s(E,4),B=s(e(T),2),ba=e(B,!0);t(B),t(T);var J=s(T,2),fa=e(J);fa.__click=[Ka,a],t(J),t(k);var q=s(k,2);A(q,20,()=>["body","reflexes","mind","instinct","presence"],r=>r,(r,i)=>{var v=Wa(),n=e(v),c=e(n,!0);t(n);var o=s(n,2),d=e(o),C=e(d,!0);t(d);var z=s(d,2);z.__click=[Qa,b,i],t(o),t(v),M(()=>{l(c,V.ATTR_NAME_MAP[i]),l(C,a.creature.attributes[i])}),_(r,v)}),t(q);var I=s(q,2),L=e(I),K=s(e(L),2),xa=e(K,!0);t(K),t(L);var D=s(L,2),Q=s(e(D),2),ha=e(Q);t(Q),t(D);var N=s(D,2),W=s(e(N),2),za=e(W);t(W),t(N);var j=s(N,2),X=s(e(j),2),pa=e(X);t(X),t(j);var P=s(j,2),Z=s(e(P),2),Ma=e(Z);t(Z),t(P);var $=s(P,2),aa=s(e($),2),U=e(aa),ya=e(U,!0);t(U);var Aa=s(U,2);Aa.__click=[Xa,b],t(aa),t($),t(I);var ta=s(I,2),F=e(ta),O=e(F),ea=s(e(O),2),Ca=e(ea);{var Ra=r=>{var i=la();M(v=>l(i,v),[()=>a.creature.languages.join(", ")]),_(r,i)},wa=r=>{var i=la("Ninguna");_(r,i)};p(Ca,r=>{a.creature.languages.length>0?r(Ra):r(wa,!1)})}t(ea),t(O);var ra=s(O,2);{var Sa=r=>{var i=$a(),v=s(e(i),2);A(v,21,()=>a.creature.traits,n=>n.name,(n,c)=>{var o=Za(),d=e(o),C=e(d);t(d);var z=s(d,2),y=e(z,!0);t(z),t(o),M(()=>{l(C,`${g(c).name??""}:`),l(y,g(c).detail)}),_(n,o)}),t(v),t(i),_(r,i)};p(ra,r=>{a.creature.traits.length>0&&r(Sa)})}var sa=s(ra,2);{var ka=r=>{var i=rt(),v=s(e(i),2);A(v,21,()=>a.creature.attacks,n=>n.name,(n,c)=>{var o=et(),d=e(o),C=e(d,!0);t(d);var z=s(d,2),y=e(z);y.__click=[at,h,c];var Na=e(y);t(y);var R=s(y,2);R.__click=[tt,w,c];var ja=e(R);t(R);var Pa=s(R,1,!0);t(z),t(o),M(()=>{l(C,g(c).name),l(Na,`${(g(c).bonus>0?"+"+g(c).bonus:g(c).bonus)??""} 游꿢`),l(ja,`${g(c).damage??""} 游눤`),l(Pa,g(c).note?g(c).note:"")}),_(n,o)}),t(v),t(i),_(r,i)};p(sa,r=>{a.creature.attacks.length>0&&r(ka)})}var ia=s(sa,2);{var Ea=r=>{var i=it(),v=s(e(i),2);A(v,21,()=>a.creature.actions,n=>n.name,(n,c)=>{var o=st(),d=e(o);G(d,{get action(){return g(c)}}),t(o),_(n,o)}),t(v),t(i),_(r,i)};p(ia,r=>{a.creature.actions.length>0&&r(Ea)})}var va=s(ia,2);{var Ta=r=>{var i=nt(),v=s(e(i),2);A(v,21,()=>a.creature.reactions,n=>n.name,(n,c)=>{var o=vt(),d=e(o);G(d,{get action(){return g(c)}}),t(o),_(n,o)}),t(v),t(i),_(r,i)};p(va,r=>{a.creature.reactions.length>0&&r(Ta)})}var na=s(va,2);{var qa=r=>{var i=ct(),v=s(e(i),2);A(v,21,()=>a.creature.interactions,n=>n.name,(n,c)=>{var o=ot(),d=e(o);G(d,{get action(){return g(c)}}),t(o),_(n,o)}),t(v),t(i),_(r,i)};p(na,r=>{a.creature.interactions.length>0&&r(qa)})}var oa=s(na,2),ca=s(e(oa),2),Ia=e(ca,!0);t(ca),t(oa),t(F);var La=s(F,2);{var Da=r=>{var i=lt(),v=e(i);t(i),M(()=>{ua(v,"src",a.creature.img),ua(v,"alt",a.creature.name)}),_(r,i)};p(La,r=>{a.creature.img&&r(Da)})}t(ta),t(Y),t(S),M(()=>{l(ma,a.creature.name),l(ba,a.creature.tier),l(xa,a.creature.stats.maxHealth),l(ha,`${a.creature.stats.evasion.value??""}${a.creature.stats.evasion.note?` (${a.creature.stats.evasion.note})`:""}`),l(za,`${a.creature.stats.physicalMitigation.value??""}${a.creature.stats.physicalMitigation.note?` (${a.creature.stats.physicalMitigation.note})`:""}`),l(pa,`${a.creature.stats.magicalMitigation.value??""}${a.creature.stats.magicalMitigation.note?` (${a.creature.stats.magicalMitigation.note})`:""}`),l(Ma,`${a.creature.stats.speed.value??""}${a.creature.stats.speed.note?` (${a.creature.stats.speed.note})`:""}`),l(ya,a.creature.attributes.reflexes),l(Ia,a.creature.behavior)}),_(x,S),_a()}Ua(["click"]);const H=Ya([]),At=()=>({loadCreatures:async()=>{if(Ba(H).length>0)return;const u=await(await fetch(ga("/docs/bestiary.yml"))).text();let f=[];try{f=Ha(u).creatures??[]}catch(b){console.error("Error parsing YAML:",b)}H.set(f.map(b=>Va(b)).toSorted((b,h)=>b.tier-h.tier||b.name.localeCompare(h.name)))},creatures:H});export{yt as S,At as u};
