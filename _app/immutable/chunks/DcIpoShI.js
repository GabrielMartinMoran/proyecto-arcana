import"./DsnmJJEf.js";import{F as Pe,I as Be,G as Qe,a1 as Ye,aq as fe,b7 as Le,aV as He,g as s,O as T,b8 as we,aF as he,p as ue,f as y,d as m,r as d,s as p,aG as K,t as D,e as S,aL as Xe,b as h,c as de,b6 as Ke,a as W,aH as $,aP as Je}from"./Dl_kGUak.js";import{i as F}from"./DccvG5gq.js";import{e as pe,c as Ve}from"./BoMojr1W.js";import{r as _e,s as Z,a as Ze,c as qe}from"./DKYRsdlI.js";import{b as De}from"./D4bbXkf-.js";import{p as q}from"./C3wsAjb9.js";import{b as $e,r as Ee,l as et}from"./BQL_5efD.js";import{C as tt,s as Re}from"./DkjE_zKB.js";import{C as X}from"./B_ycimPA.js";import{s as ve}from"./DlQ3ops_.js";import{h as at}from"./D4HRbizW.js";import{d as rt}from"./Bx3Ta1aT.js";import{r as st}from"./BGeKsaQu.js";import{p as U}from"./Dp3J_PUs.js";import{r as nt}from"./CShI_x2V.js";import{m as lt,a as it}from"./DpY7wP4R.js";import{w as Ue,g as ot}from"./DXm1rpZT.js";function ct(r,e,t){Pe(()=>{var a=Be(()=>e(r,t?.())||{});if(a?.destroy)return()=>a.destroy()})}function vt(r,e,t,a,n){var o=()=>{a(t[r])};t.addEventListener(e,o),n?Qe(()=>{t[r]=n()}):o(),(t===document.body||t===window||t===document)&&Ye(()=>{t.removeEventListener(e,o)})}const ut=r=>{window.addEventListener("click",e);function e(t){r.contains(t.target)||r.dispatchEvent(new CustomEvent("outsideclick"))}return{destroy(){window.removeEventListener("click",e)}}};var dt=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],ft=["difference","intersection","symmetricDifference","union"],ze=!1;class se extends Set{#a=new Map;#e=fe(0);#t=fe(0);#r=Le||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}ze||this.#n()}#s(e){return Le===this.#r?fe(e):He(e)}#n(){ze=!0;var e=se.prototype,t=Set.prototype;for(const a of dt)e[a]=function(...n){return s(this.#e),t[a].apply(this,n)};for(const a of ft)e[a]=function(...n){s(this.#e);var o=t[a].apply(this,n);return new se(o)}}has(e){var t=super.has(e),a=this.#a,n=a.get(e);if(n===void 0){if(!t)return s(this.#e),!1;n=this.#s(!0),a.set(e,n)}return s(n),t}add(e){return super.has(e)||(super.add(e),T(this.#t,super.size),we(this.#e)),this}delete(e){var t=super.delete(e),a=this.#a,n=a.get(e);return n!==void 0&&(a.delete(e),T(n,!1)),t&&(T(this.#t,super.size),we(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())T(t,!1);e.clear(),T(this.#t,0),we(this.#e)}}keys(){return this.values()}values(){return s(this.#e),super.values()}entries(){return s(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return s(this.#t)}}const mt=(r,e,t)=>{T(e,new se),t.onChange(Array.from(s(e)))};var _t=(r,e,t)=>e(r.target.checked,s(t).value),ht=y('<li class="svelte-1d1gkms"><label class="svelte-1d1gkms"> <input type="checkbox" class="svelte-1d1gkms"/></label></li>'),pt=y('<details class="svelte-1d1gkms"><summary class="svelte-1d1gkms"> </summary> <form class="svelte-1d1gkms"><fieldset class="svelte-1d1gkms"><ul class="svelte-1d1gkms"></ul> <button class="clear-btn svelte-1d1gkms">Limpiar</button></fieldset></form></details>');function Se(r,e){ue(e,!0);let t=K(()=>new se(e.value));const a=(w,C)=>{w?s(t).add(C):s(t).delete(C),T(t,new se(s(t))),e.onChange(Array.from(s(t)))};let n=fe(!1);const o=()=>{T(n,!1)};var i=pt(),l=m(i),c=m(l);d(l);var E=p(l,2),L=m(E),x=m(L);pe(x,21,()=>e.options,w=>w.value,(w,C)=>{var N=ht(),O=m(N),u=m(O),v=p(u);_e(v),v.__input=[_t,a,C],d(O),d(N),D(f=>{Z(O,"for",s(C).value),S(u,`${s(C).label??""} `),Z(v,"id",s(C).value),Z(v,"name",s(C).value),Ze(v,s(C).value),qe(v,f)},[()=>s(t).has(s(C).value)]),h(w,N)}),d(x);var M=p(x,2);M.__click=[mt,t,e],d(L),d(E),d(i),ct(i,w=>ut?.(w)),Pe(()=>vt("open","toggle",i,w=>T(n,w),()=>s(n))),D(()=>{S(c,`${e.summary??""} (${s(t).size??""})`),M.disabled=s(t).size===0}),Xe("outsideclick",i,o),h(r,i),de()}he(["input","click"]);var gt=(r,e,t)=>e.onFiltersChange({...s(t)}),bt=(r,e,t)=>{s(e).type=r.target.value,t.onFiltersChange({...s(e)})},yt=y("<option> </option>"),Ct=(r,e,t)=>{s(e).onlyAvailables=r.target.checked,t.onFiltersChange({...s(e)})},At=y('<div class="only-availables-field svelte-1o8sb8t"><label for="only-availables" class="svelte-1o8sb8t"><input type="checkbox" id="only-availables" class="svelte-1o8sb8t"/>Ver Solo disponibles</label></div>'),kt=(r,e)=>e.onResetFilters(),wt=y('<div class="filters svelte-1o8sb8t"><input type="text" placeholder="Buscar por nombre" class="svelte-1o8sb8t"/> <select class="svelte-1o8sb8t"><option>Todos los Tipos</option><!></select> <!> <!> <!> <button>Limpiar Filtros</button></div>');function Ca(r,e){ue(e,!0);let t=q(e,"includeOnlyAvailablesFilter",3,!1),a=K(()=>e.filters);const n=()=>{const l=new Set(e.cards.map(c=>c.level));return Array.from(l).sort((c,E)=>c-E)},o=()=>{const l=new Set(e.cards.flatMap(c=>c.tags));return Array.from(l).sort()},i=()=>{const l=new Set(e.cards.map(c=>c.type));return Array.from(l).sort()};tt(r,{children:(l,c)=>{var E=wt(),L=m(E);_e(L),L.__input=[gt,e,a];var x=p(L,2);x.__change=[bt,a,e];var M=m(x);M.value=M.__value="";var w=p(M);pe(w,16,i,f=>f,(f,b)=>{var z=yt(),j=m(z,!0);d(z);var A={};D(g=>{S(j,g),A!==(A=b)&&(z.value=(z.__value=b)??"")},[()=>$e(b)]),h(f,z)}),d(x);var C=p(x,2);{let f=K(()=>n().map(b=>({value:b,label:`Nivel ${b}`})));Se(C,{summary:"Niveles",get options(){return s(f)},get value(){return s(a).level},onChange:b=>{s(a).level=b,e.onFiltersChange({...s(a)})}})}var N=p(C,2);{let f=K(()=>o().map(b=>({value:b.toLowerCase(),label:b})));Se(N,{summary:"Etiquetas",get options(){return s(f)},get value(){return s(a).tags},onChange:b=>{s(a).tags=b.map(z=>z.toLowerCase()),e.onFiltersChange({...s(a)})}})}var O=p(N,2);{var u=f=>{var b=At(),z=m(b),j=m(z);_e(j),j.__input=[Ct,a,e],Ke(),d(z),d(b),D(()=>qe(j,s(a).onlyAvailables)),h(f,b)};F(O,f=>{t()&&f(u)})}var v=p(O,2);v.__click=[kt,e],d(E),De(L,()=>s(a).name,f=>s(a).name=f),h(l,E)},$$slots:{default:!0}}),de()}he(["input","change","click"]);var Et=y("<label> </label>"),xt=(r,e,t,a)=>{e.max!==void 0&&typeof s(t)=="number"&&T(t,Math.min(s(t),e.max)),a()(s(t))},Lt=y('<span class="divider svelte-1r47u3b">/</span> <span> </span>',1),Rt=y('<button class="button svelte-1r47u3b"> </button>'),zt=y("<div><!> <span><input/> <!> <!></span></div>");function St(r,e){ue(e,!0);let t=q(e,"label",3,void 0),a=q(e,"labelWidth",3,"normalized"),n=q(e,"readonly",3,!1),o=q(e,"onChange",3,()=>{}),i=q(e,"button",3,void 0),l=q(e,"fullWidth",3,!1),c=q(e,"placeholder",3,""),E=q(e,"textAlign",3,"center"),L=K(()=>e.value);var x=zt();let M;var w=m(x);{var C=A=>{var g=Et(),P=m(g,!0);d(g),D(()=>{ve(g,1,Ve(a()),"svelte-1r47u3b"),S(P,t())}),h(A,g)};F(w,A=>{t()&&A(C)})}var N=p(w,2);let O;var u=m(N);_e(u);let v;Z(u,"min",0),u.__input=[xt,e,L,o];var f=p(u,2);{var b=A=>{var g=Lt(),P=p(W(g),2);let J;var ne=m(P,!0);d(P),D(ee=>{J=ve(P,1,"max svelte-1r47u3b",null,J,ee),S(ne,e.max)},[()=>({withButton:i()!==void 0})]),h(A,g)};F(f,A=>{e.max!==void 0&&A(b)})}var z=p(f,2);{var j=A=>{var g=Rt();g.__click=function(...J){i().onClick?.apply(this,J)};var P=m(g,!0);d(g),D(()=>{Z(g,"title",i().title),g.disabled=i().disabled,S(P,i().icon)}),h(A,g)};F(z,A=>{i()&&A(j)})}d(N),d(x),D((A,g,P)=>{M=ve(x,1,"fieldgroup svelte-1r47u3b",null,M,A),O=ve(N,1,"field svelte-1r47u3b",null,O,g),Z(u,"type",typeof e.value=="number"?"number":"text"),u.disabled=n(),v=ve(u,1,`text-align-${E()}`,"svelte-1r47u3b",v,P),Z(u,"max",e.max),Z(u,"placeholder",c())},[()=>({fullWidth:l()}),()=>({inputAlone:e.max===void 0&&i()===void 0&&!l(),inputWithButton:i()!==void 0,fullWidth:l(),readonly:n()}),()=>({alone:e.max===void 0&&i()===void 0,fullWidth:l(),withButton:i()!==void 0,withButtonAndMax:e.max!==void 0&&i()!==void 0})]),De(u,()=>s(L),A=>T(L,A)),h(r,x),de()}he(["input","click"]);const Ft=r=>{const e=[];let t="";for(const n of r)if(n==="&"||n==="|"||n==="("||n===")"){const o=t.trim();o&&e.push({type:"REQ",value:o}),t="",n==="&"?e.push({type:"AND"}):n==="|"?e.push({type:"OR"}):n==="("?e.push({type:"LPAREN"}):e.push({type:"RPAREN"})}else t+=n;const a=t.trim();return a&&e.push({type:"REQ",value:a}),e},Me=r=>{const e=Ft(r);let t=0;const a=()=>e[t],n=()=>e[t++],o=()=>{const c=a();if(c?.type==="LPAREN"){n();const E=l();return n(),E}if(c?.type==="REQ")return n(),{type:"req",value:c.value};throw new Error(`Unexpected token at position ${t}`)},i=()=>{const c=[o()];for(;a()?.type==="AND";)n(),c.push(o());return c.length===1?c[0]:{type:"and",children:c}},l=()=>{const c=[i()];for(;a()?.type==="OR";)n(),c.push(i());return c.length===1?c[0]:{type:"or",children:c}};return l()},xe=(r,e)=>{switch(r.type){case"req":return e.includes(r.value.toLowerCase());case"and":return r.children.every(t=>xe(t,e));case"or":return r.children.some(t=>xe(t,e))}},me=r=>{switch(r.type){case"req":return r.value;case"or":return r.children.map(me).join(", o ");case"and":{let e=me(r.children[0]);for(let t=1;t<r.children.length;t++){const a=me(r.children[t]),n=r.children[t-1].type==="or";e+=n?`; + ${a}`:` + ${a}`}return e}}},Tt=r=>{if(!r)return"â€”";try{return me(Me(r))}catch{return r}},Fe=(r,e)=>{if(!r)return!0;try{const t=Me(r);return xe(t,e)}catch(t){return console.error("Error parsing requirement expression:",r,t),!0}};var Nt=y('<span class="chip svelte-6vztta"> </span>'),Ot=y('<span class="chip svelte-6vztta"> </span>'),Pt=y('<span class="chip svelte-6vztta"> </span>'),qt=y('<span class="chip svelte-6vztta"> </span>'),Dt=y('<span class="chip svelte-6vztta"> </span>'),Ut=y('<span class="chip svelte-6vztta"> </span>'),Mt=y('<div class="controls svelte-6vztta"><!></div>'),It=y('<div class="card svelte-6vztta"><div class="bg svelte-6vztta"></div> <div class="inner svelte-6vztta"><div class="header svelte-6vztta"><div class="chips svelte-6vztta"><span class="chip svelte-6vztta"> </span> <span class="chip svelte-6vztta"> </span> <span class="spacer svelte-6vztta"></span> <span class="chip svelte-6vztta"> </span></div> <h3 class="svelte-6vztta"> </h3></div> <div class="body svelte-6vztta"><span class="description svelte-6vztta"><!></span> <div class="tags svelte-6vztta"><!> <!> <!></div></div> <div class="footer svelte-6vztta"><span class="requirements svelte-6vztta">REQUERIMIENTOS</span> <div class="requirements-list svelte-6vztta"><span> </span></div> <!></div></div></div>');function jt(r,e){ue(e,!0);let t=q(e,"children",3,void 0);const a=_=>{switch(Ee(_.length>0?String(_[0]).toLowerCase():"")){case"arcanista":return"var(--accent-arcanista)";case"combatiente":return"var(--accent-combatiente)";case"picaro":return"var(--accent-picaro)";case"druida":return"var(--accent-druida)";case"sacerdote":return"var(--accent-sacerdote)";case"bardo":return"var(--accent-bardo)";case"dote":return"var(--accent-dote)";case"linaje":return"var(--accent-linaje)";default:return"var(--accent-default)"}};var n=It();let o;var i=m(n);let l;var c=p(i,2),E=m(c),L=m(E),x=m(L),M=m(x,!0);d(x);var w=p(x,2),C=m(w);d(w);var N=p(w,4),O=m(N,!0);d(N),d(L);var u=p(L,2),v=m(u,!0);d(u),d(E);var f=p(E,2),b=m(f),z=m(b);at(z,()=>rt.parse(e.card.description)),d(b);var j=p(b,2),A=m(j);pe(A,16,()=>e.card.tags,_=>_,(_,k)=>{var R=Nt(),Y=m(R,!0);d(R),D(()=>S(Y,k)),h(_,R)});var g=p(A,2);{var P=_=>{var k=$(),R=W(k);{var Y=Q=>{var H=Ot(),ce=m(H);d(H),D(()=>S(ce,`Usos: ${e.card.uses.qty??"?"??""} por dÃ­a de descanso`)),h(Q,H)},oe=Q=>{var H=$(),ce=W(H);{var ge=I=>{var G=Pt(),ye=m(G);d(G),D(()=>S(ye,`Usos: ${e.card.uses.qty??"?"??""} por dÃ­a`)),h(I,G)},be=I=>{var G=$(),ye=W(G);{var Ie=ae=>{var re=qt(),Ce=m(re);d(re),D(()=>S(Ce,`Usos: 1 (Recarga ${e.card.uses.qty??"?"??""}+)`)),h(ae,re)},je=ae=>{var re=$(),Ce=W(re);{var Ge=Ae=>{var ke=Dt(),We=m(ke);d(ke),D(()=>S(We,`Usos: ${e.card.uses.qty??"?"??""}`)),h(Ae,ke)};F(Ce,Ae=>{e.card.uses.type==="USES"&&Ae(Ge)},!0)}h(ae,re)};F(ye,ae=>{e.card.uses.type==="RELOAD"?ae(Ie):ae(je,!1)},!0)}h(I,G)};F(ce,I=>{e.card.uses.type==="DAY"?I(ge):I(be,!1)},!0)}h(Q,H)};F(R,Q=>{e.card.uses.type==="LONG_REST"?Q(Y):Q(oe,!1)})}h(_,k)};F(g,_=>{e.card.uses.type&&_(P)})}var J=p(g,2);{var ne=_=>{var k=Ut(),R=m(k);d(k),D(()=>S(R,`Costo: ${e.card.cost??""} de oro`)),h(_,k)};F(J,_=>{e.card.cardType==="item"&&_(ne)})}d(j),d(f);var ee=p(f,2),B=p(m(ee),2),V=m(B),te=m(V,!0);d(V),d(B);var le=p(B,2);{var ie=_=>{var k=Mt(),R=m(k);Je(R,t),d(k),h(_,k)};F(le,_=>{t()!==void 0&&_(ie)})}d(ee),d(c),d(n),D((_,k,R,Y)=>{o=Re(n,"",o,_),l=Re(i,"",l,k),S(M,e.card.cardType==="ability"?"Habilidad":"Objeto MÃ¡gico"),S(C,`Nivel ${e.card.level??""}`),S(O,R),S(v,e.card.name),S(te,Y)},[()=>({"border-color":a(e.card.tags)}),()=>({"background-image":`url(${e.card.img})`}),()=>e.card.type.charAt(0).toUpperCase()+e.card.type.slice(1),()=>Tt(e.card.requirements)]),h(r,n),de()}var Gt=(r,e,t)=>e(s(t).id),Wt=y('<!> <span class="spacer"></span> <button>Desactivar</button>',1),Bt=(r,e,t)=>e(s(t).id),Qt=(r,e,t)=>e(s(t).id),Yt=y("<button>Desactivar</button>"),Ht=(r,e,t)=>e(s(t).id),Xt=y("<button>Activar</button>"),Kt=y('<button>Quitar</button> <span class="spacer"></span> <!>',1),Jt=(r,e,t)=>e(s(t)),Vt=y('<span class="spacer"></span> <button>Agregar</button>',1),Zt=y('<div class="controls svelte-1rfcjb3"><!></div>'),$t=y('<div class="cards svelte-1rfcjb3"></div>');function Aa(r,e){ue(e,!0);let t=q(e,"readonly",3,!0),a=q(e,"characterCards",19,()=>[]),n=q(e,"listMode",3,"all"),o=q(e,"onChange",3,()=>{}),i=q(e,"onCardReloadClick",3,()=>{}),l=K(a);const c=u=>{const v=e.cards.find(f=>f.id===u);if(!v){L(u);return}T(l,s(l).map(f=>f.id===u?{...f,isActive:!1,uses:C(v)}:f)),o()(s(l))},E=u=>{T(l,s(l).map(v=>v.id===u?{...v,isActive:!0}:v)),o()(s(l))},L=u=>{T(l,s(l).filter(v=>v.id!==u)),o()(s(l))},x=u=>{T(l,[...s(l),{id:u.id,uses:C(u),isActive:!1,level:u.level,cardType:u.type}]),o()(s(l))},M=(u,v)=>{T(l,s(l).map(f=>f.id===u?{...f,uses:v}:f)),o()(s(l))},w=u=>{const v=s(l).find(f=>f.id===u);return v?v.uses:0},C=u=>{if(u.uses.type===null)return null;switch(u.uses.type){case"USES":case"LONG_REST":case"DAY":return u.uses.qty??0;case"RELOAD":return X.RELOAD_CARD_USES;default:return null}},N=u=>{const v=s(l).find(f=>f.id===u.id);return v?v.isActive:!1};var O=$t();pe(O,21,()=>e.cards,u=>u.id,(u,v)=>{jt(u,{get card(){return s(v)},children:(f,b)=>{var z=$(),j=W(z);{var A=g=>{var P=Zt(),J=m(P);{var ne=B=>{var V=Wt(),te=W(V);{var le=_=>{{let k=K(()=>w(s(v).id)),R=K(()=>C(s(v))),Y=K(()=>({icon:"ðŸŽ²",title:"Tirar para recargar",onClick:()=>i()(s(v).id),disabled:w(s(v).id)===C(s(v))}));St(_,{get value(){return s(k)},get max(){return s(R)},onChange:oe=>M(s(v).id,Number(oe)),get button(){return s(Y)}})}};F(te,_=>{C(s(v))!==null&&_(le)})}var ie=p(te,4);ie.__click=[Gt,c,v],h(B,V)},ee=B=>{var V=$(),te=W(V);{var le=_=>{var k=Kt(),R=W(k);R.__click=[Bt,L,v];var Y=p(R,4);{var oe=Q=>{var H=$(),ce=W(H);{var ge=I=>{var G=Yt();G.__click=[Qt,c,v],h(I,G)},be=I=>{var G=Xt();G.__click=[Ht,E,v],h(I,G)};F(ce,I=>{N(s(v))?I(ge):I(be,!1)})}h(Q,H)};F(Y,Q=>{s(v).type==="activable"&&Q(oe)})}h(_,k)},ie=_=>{var k=Vt(),R=p(W(k),2);R.__click=[Jt,x,v],h(_,k)};F(te,_=>{n()==="collection"?_(le):_(ie,!1)},!0)}h(B,V)};F(J,B=>{n()==="active"?B(ne):B(ee,!1)})}d(P),h(g,P)};F(j,g=>{t()||g(A)})}h(f,z)},$$slots:{default:!0}})}),d(O),h(r,O),de()}he(["click"]);const ka=()=>({buildEmptyFilters:({onlyAvailables:a}={onlyAvailables:void 0})=>({name:"",level:[],tags:[],type:"",onlyAvailables:a}),getFiltersFromURL:()=>{const a=U.url.searchParams.get("name")??"",n=U.url.searchParams.getAll("level").filter(l=>l!=="").map(Number).filter(l=>l>0),o=U.url.searchParams.getAll("tags").filter(l=>l!==""),i=U.url.searchParams.get("type")??"";return{name:a,level:n,tags:o,type:i}},updateURLFilters:a=>{a.name?U.url.searchParams.set("name",a.name):U.url.searchParams.delete("name"),a.level.length===0?U.url.searchParams.delete("level"):U.url.searchParams.set("level",a.level.join(",")),a.tags.length===0?U.url.searchParams.delete("tags"):U.url.searchParams.set("tags",a.tags.join(",")),a.type?U.url.searchParams.set("type",a.type):U.url.searchParams.delete("type");const n=U.url.searchParams.toString(),o=`${U.url.pathname}${n?`?${n}`:""}`;st(o,{})}}),Te=Ue([]),Ne=Ue([]),Oe=async(r,e,t,a)=>{if(ot(t).length>0)return;const o=await(await fetch(nt(r))).text();let i=[];try{i=et(o)[e]??[]}catch(l){console.error("Error parsing YAML:",l)}t.set(i.map(l=>a(l)).toSorted((l,c)=>l.level-c.level||l.tags.join("|").localeCompare(c.tags.join("|"))||l.name.localeCompare(c.name)))},wa=()=>({loadAbilityCards:async()=>{await Oe("/docs/cards.yml","cards",Te,lt)},abilityCards:Te,loadItemCards:async()=>{await Oe("/docs/magical-items.yml","items",Ne,it)},itemCards:Ne}),Ea=(r,e,t=void 0)=>{let a=[],n=[],o=!1;return t&&e.onlyAvailables&&(a=ta(r,t),n=ea(a,t),o=!0),r.filter(i=>{let l=Ee(e.name.toLowerCase()).split("|").filter(c=>c.length>0);return l.length===0&&(l=[""]),l.some(c=>Ee(i.name.toLowerCase()).includes(c))&&(e.level.length===0||e.level.includes(i.level))&&(e.tags.length===0||e.tags.some(c=>i.tags.map(E=>E.toLowerCase()).includes(c)))&&(!e.type||e.type===i.type)&&(!o||aa(i,a,n))})},ea=(r,e)=>{const t=[];for(const a of X.CARD_ALIASES){if(!a.triggerCards.some(i=>r.includes(i.toLowerCase())))continue;const o=[a.targetCard.toLowerCase()];for(const i of a.attributeSubstitutions){const l=Object.entries(X.ATTR_NAME_MAP).find(([,c])=>c===i.to)?.[0];if(l)for(let c=1;c<=e.attributes[l];c++)o.push(`${i.from} ${c}`.toLowerCase())}t.push({targetCard:a.targetCard.toLowerCase(),extraFulfilled:o})}return t},ta=(r,e)=>{const t=[];for(const o of Object.keys(X.ATTR_NAME_MAP))for(let i=1;i<=e.attributes[o];i++)t.push(`${X.ATTR_NAME_MAP[o]} ${i}`.toLowerCase());const a=r.filter(o=>e.cards.find(i=>i.id===o.id));for(const o of a)t.push(o.name.toLowerCase());const n=r.filter(o=>o.tags.includes(X.LINEAGE_CARD_TAG)&&e.cards.find(i=>i.id===o.id)).length;return e.cards.length<=X.MAX_CARDS_TO_INCLUDE_LINEAGES&&n<X.MAX_LINEAGE_CARDS&&t.push(X.LINEAGE_REQUIREMENT.toLowerCase()),t},aa=(r,e,t)=>{if(Fe(r.requirements,e))return!0;for(const a of t){if(!r.requirements?.toLowerCase().includes(a.targetCard))continue;const n=[...e,...a.extraFulfilled];if(Fe(r.requirements,n))return!0}return!1};export{Ca as C,St as I,wa as a,Aa as b,ct as c,ut as d,Ea as f,ka as u};
