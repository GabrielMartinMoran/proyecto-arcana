import"../chunks/DsnmJJEf.js";import{d as Mt,s as _,o as Yt}from"../chunks/D_zjkKVN.js";import{p as U,d as J,b as h,e as a,ab as tt,g as r,r as e,t as F,j as n,a as g,aJ as bt,aa as ht,J as xt,Y as Gt,K as B}from"../chunks/t0Cq7XZL.js";import{r as Ht,e as T,b as Kt,c as pt,s as zt}from"../chunks/BDY9aIh_.js";import{i as L,s as Vt,a as Qt}from"../chunks/CuTJ2zLb.js";import{r as Wt}from"../chunks/D4INNum6.js";import{p as q}from"../chunks/BAJ4bOjZ.js";import{C as Xt}from"../chunks/0WDDsGuN.js";import{a as Zt,p as $t}from"../chunks/J-oAiaes.js";import{c as te,l as ee,r as Ct}from"../chunks/CGjaQNWU.js";import{C as et}from"../chunks/BLLLuF8N.js";import{r as ae}from"../chunks/f2DzeVQY.js";import{m as re}from"../chunks/W6WjCfrW.js";import{w as se,g as ie}from"../chunks/y52P6WVk.js";var ne=(f,t,o)=>t.onFiltersChange({...n(o),name:f.target.value}),ve=(f,t,o)=>t.onFiltersChange({...n(o),tier:f.target.value}),oe=h("<option> </option>"),le=(f,t)=>t.onResetFilters(),ce=h('<div class="filters svelte-197x4u5"><input type="text" placeholder="Buscar por nombre" class="svelte-197x4u5"/> <select class="svelte-197x4u5"><option>Todos los Rangos</option><!></select> <button>Limpiar Filtros</button></div>');function ue(f,t){U(t,!0);let o=tt(()=>t.filters);const M=()=>{const m=new Set(t.creatures.map(p=>p.tier));return Array.from(m).sort((p,y)=>p-y)};Xt(f,{children:(m,p)=>{var y=ce(),z=a(y);Ht(z),z.__input=[ne,t,o];var C=r(z,2);C.__change=[ve,t,o];var R=a(C);R.value=R.__value="";var P=r(R);T(P,16,M,k=>k,(k,S)=>{var c=oe(),x=a(c);e(c);var A={};F(w=>{pt(c,w),_(x,`Rango ${S??""}`),A!==(A=`${S}`)&&(c.value=c.__value=`${S}`)},[()=>n(o).tier===String(S)]),g(k,c)}),e(C);var E=r(C,2);E.__click=[le,t],e(y),F(()=>{Kt(z,n(o).name),pt(R,!n(o).tier)}),g(m,y)},$$slots:{default:!0}}),J()}Mt(["input","change","click"]);var _e=h('<div class="action"><strong> </strong> <span> </span></div>');function Z(f,t){U(t,!0);var o=_e(),M=a(o),m=a(M);e(M);var p=r(M,2),y=a(p,!0);e(p),e(o),F(()=>{_(m,`${t.action.name??""}
		${t.action.uses?`(${t.action.uses.type=="USES"?`${t.action.uses.qty} ${t.action.uses.qty===1?"uso":"usos"}`:`Recarga ${t.action.uses.qty}+`})`:""}:`),_(y,t.action.detail)}),g(f,o),J()}var de=(f,t,o)=>t(`1d8e+${et.ATTR_NAME_MAP[o]}`,te(et.ATTR_NAME_MAP[o])),ge=h('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div>'),me=(f,t)=>t("1d8e+reflejos","Iniciativa"),fe=h("<li><strong> </strong> <span> </span></li>"),be=h('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),he=(f,t,o)=>t(n(o)),xe=(f,t,o)=>t(n(o)),pe=h('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),ze=h('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),Ce=h("<li><!></li>"),Me=h('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),ye=h("<li><!></li>"),Ae=h('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),Re=h("<li><!></li>"),Se=h('<div class="actions"><strong>Interacciones</strong> <ul></ul></div>'),ke=h('<div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div>'),we=h('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span><strong>Rango</strong> <span> </span></span></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n F칤sica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigaci칩n M치gica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">游</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span><!></span></div> <!> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <!></div></div></div>');function Fe(f,t){U(t,!0);let{rollModal:o,rollExpression:M}=Zt();const m=(s,i)=>{const v={Cuerpo:t.creature.attributes.body,Reflejos:t.creature.attributes.reflexes,Mente:t.creature.attributes.mind,Instinto:t.creature.attributes.instinct,Presencia:t.creature.attributes.presence,Iniciativa:t.creature.attributes.reflexes};for(const l of Object.keys(v))v[l.toLowerCase()]=v[l];o.openRollModal({expression:s,variables:v,title:`${t.creature.name}: ${i}`})},p=s=>{m(`1d8e+${s.bonus}`,`Ataca con ${s.name}`)},y=s=>{const i=$t(s.damage);M({expression:i,title:`${t.creature.name}: Da침o de ${s.name}`})};var z=we(),C=r(a(z),2),R=a(C),P=a(R),E=a(P,!0);e(P);var k=r(P,2),S=r(a(k),2),c=a(S,!0);e(S),e(k),e(R);var x=r(R,2);T(x,20,()=>["body","reflexes","mind","instinct","presence"],s=>s,(s,i)=>{var v=ge(),l=a(v),d=a(l,!0);e(l);var u=r(l,2),b=a(u),j=a(b,!0);e(b);var I=r(b,2);I.__click=[de,m,i],e(u),e(v),F(()=>{_(d,et.ATTR_NAME_MAP[i]),_(j,t.creature.attributes[i])}),g(s,v)}),e(x);var A=r(x,2),w=a(A),D=r(a(w),2),Y=a(D,!0);e(D),e(w);var G=r(w,2),at=r(a(G),2),yt=a(at);e(at),e(G);var H=r(G,2),rt=r(a(H),2),At=a(rt);e(rt),e(H);var K=r(H,2),st=r(a(K),2),Rt=a(st);e(st),e(K);var V=r(K,2),it=r(a(V),2),St=a(it);e(it),e(V);var nt=r(V,2),vt=r(a(nt),2),Q=a(vt),kt=a(Q,!0);e(Q);var wt=r(Q,2);wt.__click=[me,m],e(vt),e(nt),e(A);var ot=r(A,2),W=a(ot),X=a(W),lt=r(a(X),2),Ft=a(lt);{var Tt=s=>{var i=bt();F(v=>_(i,v),[()=>t.creature.languages.join(", ")]),g(s,i)},Pt=s=>{var i=bt("Ninguna");g(s,i)};L(Ft,s=>{t.creature.languages.length>0?s(Tt):s(Pt,!1)})}e(lt),e(X);var ct=r(X,2);{var Et=s=>{var i=be(),v=r(a(i),2);T(v,21,()=>t.creature.traits,l=>l.name,(l,d)=>{var u=fe(),b=a(u),j=a(b);e(b);var I=r(b,2),N=a(I,!0);e(I),e(u),F(()=>{_(j,`${n(d).name??""}:`),_(N,n(d).detail)}),g(l,u)}),e(v),e(i),g(s,i)};L(ct,s=>{t.creature.traits.length>0&&s(Et)})}var ut=r(ct,2);{var It=s=>{var i=ze(),v=r(a(i),2);T(v,21,()=>t.creature.attacks,l=>l.name,(l,d)=>{var u=pe(),b=a(u),j=a(b,!0);e(b);var I=r(b,2),N=a(I);N.__click=[he,p,d];var Bt=a(N);e(N);var O=r(N,2);O.__click=[xe,y,d];var Ut=a(O);e(O);var Jt=r(O,1,!0);e(I),e(u),F(()=>{_(j,n(d).name),_(Bt,`${(n(d).bonus>0?"+"+n(d).bonus:n(d).bonus)??""} 游꿢`),_(Ut,`${n(d).damage??""} 游눤`),_(Jt,n(d).note?n(d).note:"")}),g(l,u)}),e(v),e(i),g(s,i)};L(ut,s=>{t.creature.attacks.length>0&&s(It)})}var _t=r(ut,2);{var Lt=s=>{var i=Me(),v=r(a(i),2);T(v,21,()=>t.creature.actions,l=>l.name,(l,d)=>{var u=Ce(),b=a(u);Z(b,{get action(){return n(d)}}),e(u),g(l,u)}),e(v),e(i),g(s,i)};L(_t,s=>{t.creature.actions.length>0&&s(Lt)})}var dt=r(_t,2);{var Dt=s=>{var i=Ae(),v=r(a(i),2);T(v,21,()=>t.creature.reactions,l=>l.name,(l,d)=>{var u=ye(),b=a(u);Z(b,{get action(){return n(d)}}),e(u),g(l,u)}),e(v),e(i),g(s,i)};L(dt,s=>{t.creature.reactions.length>0&&s(Dt)})}var gt=r(dt,2);{var Nt=s=>{var i=Se(),v=r(a(i),2);T(v,21,()=>t.creature.interactions,l=>l.name,(l,d)=>{var u=Re(),b=a(u);Z(b,{get action(){return n(d)}}),e(u),g(l,u)}),e(v),e(i),g(s,i)};L(gt,s=>{t.creature.interactions.length>0&&s(Nt)})}var mt=r(gt,2),ft=r(a(mt),2),jt=a(ft,!0);e(ft),e(mt),e(W);var qt=r(W,2);{var Ot=s=>{var i=ke(),v=a(i);e(i),F(()=>{zt(v,"src",t.creature.img),zt(v,"alt",t.creature.name)}),g(s,i)};L(qt,s=>{t.creature.img&&s(Ot)})}e(ot),e(C),e(z),F(()=>{_(E,t.creature.name),_(c,t.creature.tier),_(Y,t.creature.stats.maxHealth),_(yt,`${t.creature.stats.evasion.value??""}${t.creature.stats.evasion.note?` (${t.creature.stats.evasion.note})`:""}`),_(At,`${t.creature.stats.physicalMitigation.value??""}${t.creature.stats.physicalMitigation.note?` (${t.creature.stats.physicalMitigation.note})`:""}`),_(Rt,`${t.creature.stats.magicalMitigation.value??""}${t.creature.stats.magicalMitigation.note?` (${t.creature.stats.magicalMitigation.note})`:""}`),_(St,`${t.creature.stats.speed.value??""}${t.creature.stats.speed.note?` (${t.creature.stats.speed.note})`:""}`),_(kt,t.creature.attributes.reflexes),_(jt,t.creature.behavior)}),g(f,z),J()}Mt(["click"]);const $=se([]),Te=()=>({loadCreatures:async()=>{if(ie($).length>0)return;const o=await(await fetch(ae("/docs/bestiary.yml"))).text();let M=[];try{M=ee(o).creatures??[]}catch(m){console.error("Error parsing YAML:",m)}$.set(M.map(m=>re(m)).toSorted((m,p)=>m.tier-p.tier||m.name.localeCompare(p.name)))},creatures:$});var Pe=h('<section class="svelte-uuivdv"><h1>Bestiario</h1> <!> <div class="statblock-list svelte-uuivdv"></div></section>');function Ke(f,t){U(t,!0);const o=()=>Qt(y,"$creatures",M),[M,m]=Vt(),{loadCreatures:p,creatures:y}=Te();let z=ht(xt(q.url.searchParams.get("name")??"")),C=ht(xt(q.url.searchParams.get("tier")??"")),R=tt(()=>(o()||[]).filter(c=>{const x=Ct((n(z)||"").toLowerCase().trim()),A=Ct(c.name.toLowerCase()).includes(x),w=!n(C)||parseInt(n(C))===c.tier;return A&&w}));Yt(async()=>{await p()}),Gt(()=>{const c=new URLSearchParams(q.url.searchParams),x=(n(z)||"").trim(),A=(n(C)||"").trim();x?c.set("name",x):c.delete("name"),A?c.set("tier",A):c.delete("tier");const w=q.url.searchParams.toString(),D=c.toString();if(w===D)return;const Y=`${q.url.pathname}${D?`?${D}`:""}`;Wt(Y,{})});const P=()=>{B(z,""),B(C,"")};var E=Pe(),k=r(a(E),2);{let c=tt(()=>({name:n(z),tier:n(C)}));ue(k,{get creatures(){return o()},get filters(){return n(c)},onFiltersChange:x=>{B(z,x.name,!0),B(C,x.tier,!0)},onResetFilters:P})}var S=r(k,2);T(S,21,()=>n(R),c=>c.id,(c,x)=>{Fe(c,{get creature(){return n(x)}})}),e(S),e(E),g(f,E),J(),m()}export{Ke as component};
