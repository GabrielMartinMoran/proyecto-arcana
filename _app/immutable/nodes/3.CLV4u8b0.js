import"../chunks/DsnmJJEf.js";import"../chunks/GLbBk91X.js";import{p as V,f as b,d as e,r as a,s as r,t as S,e as n,b as m,c as Y,aa as jt,H as g,o as kt}from"../chunks/Dq1J35Nh.js";import{e as q,s as ot}from"../chunks/CKrzFlF1.js";import{i as St}from"../chunks/C1m9-puw.js";import{i as D,s as Et,a as Dt}from"../chunks/C6PZYbrM.js";import{u as Mt,p as Rt}from"../chunks/BPzsrxby.js";import{c as It,g as Lt,l as Tt}from"../chunks/CjlGQt4x.js";import{r as Ut}from"../chunks/arT32RGM.js";import{w as Bt,g as Ft}from"../chunks/CkIMCjdd.js";var Ht=b('<div class="action"><strong> </strong> <span> </span></div>');function ct(_,t){V(t,!0);var l=Ht(),x=e(l),f=e(x);a(x);var y=r(x,2),w=e(y,!0);a(y),a(l),S(()=>{n(f,`${t.action.name??""}
		${t.action.uses?`(${t.action.uses.type=="USES"?`${t.action.uses.qty} ${t.action.uses.qty===1?"uso":"usos"}`:`Recarga ${t.action.uses.qty}+`})`:""}:`),n(w,t.action.detail)}),m(_,l),Y()}var Nt=(_,t,l)=>t(`1d6e+${l}`,It(l)),Vt=b('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">ðŸŽ²</button></div></div>'),Yt=(_,t)=>t("1d6e+reflejos","Iniciativa"),Gt=b("<li><strong> </strong> <span> </span></li>"),Jt=b('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),Kt=(_,t,l)=>t(g(l)),Ot=(_,t,l)=>t(g(l)),Pt=b('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),Qt=b('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),Wt=b("<li><!></li>"),Xt=b('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),Zt=b("<li><!></li>"),$t=b('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),ta=b('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span><strong>NA</strong> <span> </span></span></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>MitigaciÃ³n</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">ðŸŽ²</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span> </span></div> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div></div></div></div>');function aa(_,t){V(t,!0);let{rollModal:l,rollExpression:x}=Mt();const f=(s,i)=>{l.openRollModal({expression:s,variables:{cuerpo:t.creature.attributes.cuerpo,reflejos:t.creature.attributes.reflejos,mente:t.creature.attributes.mente,instinto:t.creature.attributes.instinto,presencia:t.creature.attributes.presencia,iniciativa:t.creature.attributes.reflejos},title:`${t.creature.name}: ${i}`})},y=s=>{f(`1d6e+${s.bonus}`,`Ataca con ${s.name}`)},w=s=>{const i=Rt(s.damage);x({expression:i,title:`${t.creature.name}: DaÃ±o de ${s.name}`})};var z=ta(),A=r(e(z),2),h=e(A),j=e(h),lt=e(j,!0);a(j);var G=r(j,2),J=r(e(G),2),ut=e(J,!0);a(J),a(G),a(h);var M=r(h,2);q(M,20,()=>["cuerpo","reflejos","mente","instinto","presencia"],s=>s,(s,i)=>{var u=Vt(),v=e(u),o=e(v,!0);a(v);var c=r(v,2),d=e(c),k=e(d,!0);a(d);var C=r(d,2);C.__click=[Nt,f,i],a(c),a(u),S(p=>{n(o,p),n(k,t.creature.attributes[i])},[()=>i.charAt(0).toUpperCase()+i.slice(1)]),m(s,u)}),a(M);var R=r(M,2),I=e(R),K=r(e(I),2),dt=e(K,!0);a(K),a(I);var L=r(I,2),O=r(e(L),2),_t=e(O);a(O),a(L);var T=r(L,2),P=r(e(T),2),gt=e(P);a(P),a(T);var U=r(T,2),Q=r(e(U),2),mt=e(Q);a(Q),a(U);var W=r(U,2),X=r(e(W),2),B=e(X),bt=e(B,!0);a(B);var ft=r(B,2);ft.__click=[Yt,f],a(X),a(W),a(R);var Z=r(R,2),F=e(Z),H=e(F),$=r(e(H),2),xt=e($,!0);a($),a(H);var tt=r(H,2);{var pt=s=>{var i=Jt(),u=r(e(i),2);q(u,21,()=>t.creature.traits,v=>v.name,(v,o)=>{var c=Gt(),d=e(c),k=e(d);a(d);var C=r(d,2),p=e(C,!0);a(C),a(c),S(()=>{n(k,`${g(o).name??""}:`),n(p,g(o).detail)}),m(v,c)}),a(u),a(i),m(s,i)};D(tt,s=>{t.creature.traits.length>0&&s(pt)})}var at=r(tt,2);{var zt=s=>{var i=Qt(),u=r(e(i),2);q(u,21,()=>t.creature.attacks,v=>v.name,(v,o)=>{var c=Pt(),d=e(c),k=e(d,!0);a(d);var C=r(d,2),p=e(C);p.__click=[Kt,y,o];var qt=e(p);a(p);var E=r(p,2);E.__click=[Ot,w,o];var wt=e(E);a(E);var At=r(E,1,!0);a(C),a(c),S(()=>{n(k,g(o).name),n(qt,`${(g(o).bonus>0?"+"+g(o).bonus:g(o).bonus)??""} ðŸŽ¯`),n(wt,`${g(o).damage??""} ðŸ’¥`),n(At,g(o).note?g(o).note:"")}),m(v,c)}),a(u),a(i),m(s,i)};D(at,s=>{t.creature.attacks.length>0&&s(zt)})}var et=r(at,2);{var ht=s=>{var i=Xt(),u=r(e(i),2);q(u,21,()=>t.creature.actions,v=>v.name,(v,o)=>{var c=Wt(),d=e(c);ct(d,{get action(){return g(o)}}),a(c),m(v,c)}),a(u),a(i),m(s,i)};D(et,s=>{t.creature.actions.length>0&&s(ht)})}var rt=r(et,2);{var Ct=s=>{var i=$t(),u=r(e(i),2);q(u,21,()=>t.creature.reactions,v=>v.name,(v,o)=>{var c=Zt(),d=e(c);ct(d,{get action(){return g(o)}}),a(c),m(v,c)}),a(u),a(i),m(s,i)};D(rt,s=>{t.creature.reactions.length>0&&s(Ct)})}var st=r(rt,2),it=r(e(st),2),yt=e(it,!0);a(it),a(st),a(F);var vt=r(F,2),nt=e(vt);a(vt),a(Z),a(A),a(z),S(s=>{n(lt,t.creature.name),n(ut,t.creature.na),n(dt,t.creature.stats.salud),n(_t,`${t.creature.stats.esquiva.value??""}${t.creature.stats.esquiva.note?` (${t.creature.stats.esquiva.note})`:""}`),n(gt,`${t.creature.stats.mitigacion.value??""}${t.creature.stats.mitigacion.note?` (${t.creature.stats.mitigacion.note})`:""}`),n(mt,`${t.creature.stats.velocidad.value??""}${t.creature.stats.velocidad.note?` (${t.creature.stats.velocidad.note})`:""}`),n(bt,t.creature.attributes.reflejos),n(xt,s),n(yt,t.creature.behavior),ot(nt,"src",t.creature.img),ot(nt,"alt",t.creature.name)},[()=>t.creature.languages.join(", ")]),m(_,z),Y()}jt(["click"]);const ea=_=>{if(!_.name)throw new Error("Creature name is required");return{id:Lt(_.name),..._}},N=Bt([]),ra=()=>({loadCreatures:async()=>{if(Ft(N).length>0)return;const l=await(await fetch(Ut("/docs/bestiary.yml"))).text();let x=[];try{x=Tt(l).creatures??[]}catch(f){console.error("Error parsing YAML:",f)}N.set(x.map(f=>ea(f)))},creatures:N});var sa=b('<section><h1>Bestiario</h1> <div class="statblock-list svelte-13xyl7i"></div></section>');function ma(_,t){V(t,!1);const l=()=>Dt(w,"$creatures",x),[x,f]=Et(),{loadCreatures:y,creatures:w}=ra();kt(async()=>{await y()}),St();var z=sa(),A=r(e(z),2);q(A,5,l,h=>h.id,(h,j)=>{aa(h,{get creature(){return g(j)}})}),a(A),a(z),m(_,z),Y(),f()}export{ma as component};
