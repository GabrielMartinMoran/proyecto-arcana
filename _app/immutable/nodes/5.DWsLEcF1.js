import"../chunks/DsnmJJEf.js";import{d as I,s as M,o as N}from"../chunks/FRtchhGd.js";import{p as T,d as A,b as P,e as F,ab as $,g as h,r as b,t as y,h as t,a as w,aa as R,O as L,a5 as Q,Q as C}from"../chunks/Cx9SZC40.js";import{r as j,e as U,b as q,c as B}from"../chunks/y3PUPQak.js";import{s as z,a as E}from"../chunks/BQQjEHXb.js";import{r as G}from"../chunks/DxphaaVf.js";import{p as g}from"../chunks/Cz-3qk1t.js";import{C as H}from"../chunks/_p_6lNmE.js";import{u as J,S as K}from"../chunks/B4YFYCnR.js";import{r as O}from"../chunks/BQL_5efD.js";var V=(n,r,a)=>r.onFiltersChange({...t(a),name:n.target.value}),W=(n,r,a)=>r.onFiltersChange({...t(a),tier:n.target.value}),X=P("<option> </option>"),Y=(n,r)=>r.onResetFilters(),Z=P('<div class="filters svelte-197x4u5"><input type="text" placeholder="Buscar por nombre" class="svelte-197x4u5"/> <select class="svelte-197x4u5"><option>Todos los Rangos</option><!></select> <button>Limpiar Filtros</button></div>');function ee(n,r){T(r,!0);let a=$(()=>r.filters);const x=()=>{const d=new Set(r.creatures.map(m=>m.tier));return Array.from(d).sort((m,l)=>m-l)};H(n,{children:(d,m)=>{var l=Z(),i=F(l);j(i),i.__input=[V,r,a];var s=h(i,2);s.__change=[W,r,a];var v=F(s);v.value=v.__value="";var S=h(v);U(S,16,x,p=>p,(p,c)=>{var e=X(),o=F(e);b(e);var u={};y(f=>{B(e,f),M(o,`Rango ${c??""}`),u!==(u=`${c}`)&&(e.value=e.__value=`${c}`)},[()=>t(a).tier===String(c)]),w(p,e)}),b(s);var _=h(s,2);_.__click=[Y,r],b(l),y(()=>{q(i,t(a).name),B(v,!t(a).tier)}),w(d,l)},$$slots:{default:!0}}),A()}I(["input","change","click"]);var te=P('<section class="svelte-uuivdv"><h1>Bestiario</h1> <!> <div class="statblock-list svelte-uuivdv"></div></section>');function ve(n,r){T(r,!0);const a=()=>E(l,"$creatures",x),[x,d]=z(),{loadCreatures:m,creatures:l}=J();let i=R(L(g.url.searchParams.get("name")??"")),s=R(L(g.url.searchParams.get("tier")??"")),v=$(()=>(a()||[]).filter(e=>{const o=O((t(i)||"").toLowerCase().trim()),u=O(e.name.toLowerCase()).includes(o),f=!t(s)||parseInt(t(s))===e.tier;return u&&f}));N(async()=>{await m()}),Q(()=>{const e=new URLSearchParams(g.url.searchParams),o=(t(i)||"").trim(),u=(t(s)||"").trim();o?e.set("name",o):e.delete("name"),u?e.set("tier",u):e.delete("tier");const f=g.url.searchParams.toString(),k=e.toString();if(f===k)return;const D=`${g.url.pathname}${k?`?${k}`:""}`;G(D,{})});const S=()=>{C(i,""),C(s,"")};var _=te(),p=h(F(_),2);{let e=$(()=>({name:t(i),tier:t(s)}));ee(p,{get creatures(){return a()},get filters(){return t(e)},onFiltersChange:o=>{C(i,o.name,!0),C(s,o.tier,!0)},onResetFilters:S})}var c=h(p,2);U(c,21,()=>t(v),e=>e.id,(e,o)=>{K(e,{get creature(){return t(o)}})}),b(c),b(_),w(n,_),A(),d()}export{ve as component};
