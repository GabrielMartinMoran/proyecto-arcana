import"../chunks/DsnmJJEf.js";import"../chunks/B9xErqrg.js";import{s as l,d as Nt,o as Pt}from"../chunks/DEyIqfax.js";import{p as U,b as m,e,r as a,g as s,t as A,a as d,d as V,aJ as ut,j as g}from"../chunks/4UBXq5Sj.js";import{e as C,s as dt}from"../chunks/Z0ud6hNo.js";import{i as Ft}from"../chunks/CwSwkGN2.js";import{i as y,s as Lt,a as Ot}from"../chunks/DY7lAt98.js";import{a as Bt,p as Gt}from"../chunks/DnoGRbn-.js";import{c as Ht,l as Jt}from"../chunks/CGjaQNWU.js";import{C as J}from"../chunks/DjstBrrL.js";import{r as Ut}from"../chunks/DpnHJ-2K.js";import{m as Vt}from"../chunks/W6WjCfrW.js";import{w as Yt,g as Kt}from"../chunks/Cje6xDa-.js";var Qt=m('<div class="action"><strong> </strong> <span> </span></div>');function G(f,t){U(t,!0);var _=Qt(),x=e(_),b=e(x);a(x);var h=s(x,2),k=e(h,!0);a(h),a(_),A(()=>{l(b,`${t.action.name??""}
		${t.action.uses?`(${t.action.uses.type=="USES"?`${t.action.uses.qty} ${t.action.uses.qty===1?"uso":"usos"}`:`Recarga ${t.action.uses.qty}+`})`:""}:`),l(k,t.action.detail)}),d(f,_),V()}var Wt=(f,t,_)=>t(`1d6e+${J.ATTR_NAME_MAP[_]}`,Ht(J.ATTR_NAME_MAP[_])),Xt=m('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">🎲</button></div></div>'),Zt=(f,t)=>t("1d6e+reflejos","Iniciativa"),$t=m("<li><strong> </strong> <span> </span></li>"),ta=m('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),aa=(f,t,_)=>t(g(_)),ea=(f,t,_)=>t(g(_)),ra=m('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),sa=m('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),ia=m("<li><!></li>"),va=m('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),na=m("<li><!></li>"),oa=m('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),ca=m("<li><!></li>"),la=m('<div class="actions"><strong>Interacciones</strong> <ul></ul></div>'),ua=m('<div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div>'),da=m('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span><strong>Rango</strong> <span> </span></span></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigación Física</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigación Mágica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">🎲</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span><!></span></div> <!> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <!></div></div></div>');function _a(f,t){U(t,!0);let{rollModal:_,rollExpression:x}=Bt();const b=(r,i)=>{const v={Cuerpo:t.creature.attributes.body,Reflejos:t.creature.attributes.reflexes,Mente:t.creature.attributes.mind,Instinto:t.creature.attributes.instinct,Presencia:t.creature.attributes.presence,Iniciativa:t.creature.attributes.reflexes};for(const n of Object.keys(v))v[n.toLowerCase()]=v[n];_.openRollModal({expression:r,variables:v,title:`${t.creature.name}: ${i}`})},h=r=>{b(`1d6e+${r.bonus}`,`Ataca con ${r.name}`)},k=r=>{const i=Gt(r.damage);x({expression:i,title:`${t.creature.name}: Daño de ${r.name}`})};var z=da(),w=s(e(z),2),p=e(w),E=e(p),_t=e(E,!0);a(E);var Y=s(E,2),K=s(e(Y),2),gt=e(K,!0);a(K),a(Y),a(p);var I=s(p,2);C(I,20,()=>["body","reflexes","mind","instinct","presence"],r=>r,(r,i)=>{var v=Xt(),n=e(v),c=e(n,!0);a(n);var o=s(n,2),u=e(o),S=e(u,!0);a(u);var M=s(u,2);M.__click=[Wt,b,i],a(o),a(v),A(()=>{l(c,J.ATTR_NAME_MAP[i]),l(S,t.creature.attributes[i])}),d(r,v)}),a(I);var j=s(I,2),q=e(j),Q=s(e(q),2),mt=e(Q,!0);a(Q),a(q);var D=s(q,2),W=s(e(D),2),bt=e(W);a(W),a(D);var N=s(D,2),X=s(e(N),2),ft=e(X);a(X),a(N);var P=s(N,2),Z=s(e(P),2),xt=e(Z);a(Z),a(P);var F=s(P,2),$=s(e(F),2),ht=e($);a($),a(F);var tt=s(F,2),at=s(e(tt),2),L=e(at),zt=e(L,!0);a(L);var pt=s(L,2);pt.__click=[Zt,b],a(at),a(tt),a(j);var et=s(j,2),O=e(et),B=e(O),rt=s(e(B),2),Mt=e(rt);{var yt=r=>{var i=ut();A(v=>l(i,v),[()=>t.creature.languages.join(", ")]),d(r,i)},At=r=>{var i=ut("Ninguna");d(r,i)};y(Mt,r=>{t.creature.languages.length>0?r(yt):r(At,!1)})}a(rt),a(B);var st=s(B,2);{var Ct=r=>{var i=ta(),v=s(e(i),2);C(v,21,()=>t.creature.traits,n=>n.name,(n,c)=>{var o=$t(),u=e(o),S=e(u);a(u);var M=s(u,2),R=e(M,!0);a(M),a(o),A(()=>{l(S,`${g(c).name??""}:`),l(R,g(c).detail)}),d(n,o)}),a(v),a(i),d(r,i)};y(st,r=>{t.creature.traits.length>0&&r(Ct)})}var it=s(st,2);{var Rt=r=>{var i=sa(),v=s(e(i),2);C(v,21,()=>t.creature.attacks,n=>n.name,(n,c)=>{var o=ra(),u=e(o),S=e(u,!0);a(u);var M=s(u,2),R=e(M);R.__click=[aa,h,c];var jt=e(R);a(R);var T=s(R,2);T.__click=[ea,k,c];var qt=e(T);a(T);var Dt=s(T,1,!0);a(M),a(o),A(()=>{l(S,g(c).name),l(jt,`${(g(c).bonus>0?"+"+g(c).bonus:g(c).bonus)??""} 🎯`),l(qt,`${g(c).damage??""} 💥`),l(Dt,g(c).note?g(c).note:"")}),d(n,o)}),a(v),a(i),d(r,i)};y(it,r=>{t.creature.attacks.length>0&&r(Rt)})}var vt=s(it,2);{var kt=r=>{var i=va(),v=s(e(i),2);C(v,21,()=>t.creature.actions,n=>n.name,(n,c)=>{var o=ia(),u=e(o);G(u,{get action(){return g(c)}}),a(o),d(n,o)}),a(v),a(i),d(r,i)};y(vt,r=>{t.creature.actions.length>0&&r(kt)})}var nt=s(vt,2);{var wt=r=>{var i=oa(),v=s(e(i),2);C(v,21,()=>t.creature.reactions,n=>n.name,(n,c)=>{var o=na(),u=e(o);G(u,{get action(){return g(c)}}),a(o),d(n,o)}),a(v),a(i),d(r,i)};y(nt,r=>{t.creature.reactions.length>0&&r(wt)})}var ot=s(nt,2);{var Et=r=>{var i=la(),v=s(e(i),2);C(v,21,()=>t.creature.interactions,n=>n.name,(n,c)=>{var o=ca(),u=e(o);G(u,{get action(){return g(c)}}),a(o),d(n,o)}),a(v),a(i),d(r,i)};y(ot,r=>{t.creature.interactions.length>0&&r(Et)})}var ct=s(ot,2),lt=s(e(ct),2),St=e(lt,!0);a(lt),a(ct),a(O);var Tt=s(O,2);{var It=r=>{var i=ua(),v=e(i);a(i),A(()=>{dt(v,"src",t.creature.img),dt(v,"alt",t.creature.name)}),d(r,i)};y(Tt,r=>{t.creature.img&&r(It)})}a(et),a(w),a(z),A(()=>{l(_t,t.creature.name),l(gt,t.creature.tier),l(mt,t.creature.stats.maxHealth),l(bt,`${t.creature.stats.evasion.value??""}${t.creature.stats.evasion.note?` (${t.creature.stats.evasion.note})`:""}`),l(ft,`${t.creature.stats.physicalMitigation.value??""}${t.creature.stats.physicalMitigation.note?` (${t.creature.stats.physicalMitigation.note})`:""}`),l(xt,`${t.creature.stats.magicalMitigation.value??""}${t.creature.stats.magicalMitigation.note?` (${t.creature.stats.magicalMitigation.note})`:""}`),l(ht,`${t.creature.stats.speed.value??""}${t.creature.stats.speed.note?` (${t.creature.stats.speed.note})`:""}`),l(zt,t.creature.attributes.reflexes),l(St,t.creature.behavior)}),d(f,z),V()}Nt(["click"]);const H=Yt([]),ga=()=>({loadCreatures:async()=>{if(Kt(H).length>0)return;const _=await(await fetch(Ut("/docs/bestiary.yml"))).text();let x=[];try{x=Jt(_).creatures??[]}catch(b){console.error("Error parsing YAML:",b)}H.set(x.map(b=>Vt(b)).toSorted((b,h)=>b.tier-h.tier||b.name.localeCompare(h.name)))},creatures:H});var ma=m('<section class="svelte-uuivdv"><h1>Bestiario</h1> <div class="statblock-list svelte-uuivdv"></div></section>');function Ea(f,t){U(t,!1);const _=()=>Ot(k,"$creatures",x),[x,b]=Lt(),{loadCreatures:h,creatures:k}=ga();Pt(async()=>{await h()}),Ft();var z=ma(),w=s(e(z),2);C(w,5,_,p=>p.id,(p,E)=>{_a(p,{get creature(){return g(E)}})}),a(w),a(z),d(f,z),V(),b()}export{Ea as component};
