import"../chunks/DsnmJJEf.js";import"../chunks/B9xErqrg.js";import{s as o,d as qt,o as Dt}from"../chunks/DEyIqfax.js";import{p as V,b,e,r as a,g as r,t as C,a as m,d as Y,j as _}from"../chunks/4UBXq5Sj.js";import{e as k,s as ct}from"../chunks/Z0ud6hNo.js";import{i as Et}from"../chunks/CwSwkGN2.js";import{i as j,s as It,a as Lt}from"../chunks/DY7lAt98.js";import{a as Ft,p as Pt}from"../chunks/CVSkhmb7.js";import{c as Tt,l as Bt}from"../chunks/CGjaQNWU.js";import{r as Ht}from"../chunks/BRScJhZs.js";import{m as Nt}from"../chunks/DemwCk8g.js";import{w as Ot,g as Ut}from"../chunks/Cje6xDa-.js";var Vt=b('<div class="action"><strong> </strong> <span> </span></div>');function lt(p,t){V(t,!0);var u=Vt(),g=e(u),f=e(g);a(g);var x=r(g,2),w=e(x,!0);a(x),a(u),C(()=>{o(f,`${t.action.name??""}
		${t.action.uses?`(${t.action.uses.type=="USES"?`${t.action.uses.qty} ${t.action.uses.qty===1?"uso":"usos"}`:`Recarga ${t.action.uses.qty}+`})`:""}:`),o(w,t.action.detail)}),m(p,u),Y()}var Yt=(p,t,u,g)=>t(`1d6e+${u[g]}`,Tt(u[g])),Gt=b('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">🎲</button></div></div>'),Jt=(p,t)=>t("1d6e+reflejos","Iniciativa"),Kt=b("<li><strong> </strong> <span> </span></li>"),Qt=b('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),Wt=(p,t,u)=>t(_(u)),Xt=(p,t,u)=>t(_(u)),Zt=b('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),$t=b('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),ta=b("<li><!></li>"),aa=b('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),ea=b("<li><!></li>"),ra=b('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),sa=b('<div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div>'),ia=b('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span><strong>NA</strong> <span> </span></span></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigación Física</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigación Mágica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">🎲</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span> </span></div> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <!></div></div></div>');function va(p,t){V(t,!0);const u={body:"Cuerpo",reflexes:"Reflejos",mind:"Mente",instinct:"Instinto",presence:"Presencia"};let{rollModal:g,rollExpression:f}=Ft();const x=(s,i)=>{const v={Cuerpo:t.creature.attributes.body,Reflejos:t.creature.attributes.reflexes,Mente:t.creature.attributes.mind,Instinto:t.creature.attributes.instinct,Presencia:t.creature.attributes.presence,Iniciativa:t.creature.attributes.reflexes};for(const n of Object.keys(v))v[n.toLowerCase()]=v[n];g.openRollModal({expression:s,variables:v,title:`${t.creature.name}: ${i}`})},w=s=>{x(`1d6e+${s.bonus}`,`Ataca con ${s.name}`)},S=s=>{const i=Pt(s.damage);f({expression:i,title:`${t.creature.name}: Daño de ${s.name}`})};var h=ia(),y=r(e(h),2),A=e(y),D=e(A),ut=e(D,!0);a(D);var G=r(D,2),J=r(e(G),2),dt=e(J,!0);a(J),a(G),a(A);var E=r(A,2);k(E,20,()=>["body","reflexes","mind","instinct","presence"],s=>s,(s,i)=>{var v=Gt(),n=e(v),c=e(n,!0);a(n);var l=r(n,2),d=e(l),R=e(d,!0);a(d);var z=r(d,2);z.__click=[Yt,x,u,i],a(l),a(v),C(()=>{o(c,u[i]),o(R,t.creature.attributes[i])}),m(s,v)}),a(E);var I=r(E,2),L=e(I),K=r(e(L),2),_t=e(K,!0);a(K),a(L);var F=r(L,2),Q=r(e(F),2),gt=e(Q);a(Q),a(F);var P=r(F,2),W=r(e(P),2),mt=e(W);a(W),a(P);var T=r(P,2),X=r(e(T),2),bt=e(X);a(X),a(T);var B=r(T,2),Z=r(e(B),2),ft=e(Z);a(Z),a(B);var $=r(B,2),tt=r(e($),2),H=e(tt),xt=e(H,!0);a(H);var pt=r(H,2);pt.__click=[Jt,x],a(tt),a($),a(I);var at=r(I,2),N=e(at),O=e(N),et=r(e(O),2),zt=e(et,!0);a(et),a(O);var rt=r(O,2);{var ht=s=>{var i=Qt(),v=r(e(i),2);k(v,21,()=>t.creature.traits,n=>n.name,(n,c)=>{var l=Kt(),d=e(l),R=e(d);a(d);var z=r(d,2),M=e(z,!0);a(z),a(l),C(()=>{o(R,`${_(c).name??""}:`),o(M,_(c).detail)}),m(n,l)}),a(v),a(i),m(s,i)};j(rt,s=>{t.creature.traits.length>0&&s(ht)})}var st=r(rt,2);{var yt=s=>{var i=$t(),v=r(e(i),2);k(v,21,()=>t.creature.attacks,n=>n.name,(n,c)=>{var l=Zt(),d=e(l),R=e(d,!0);a(d);var z=r(d,2),M=e(z);M.__click=[Wt,w,c];var At=e(M);a(M);var q=r(M,2);q.__click=[Xt,S,c];var Rt=e(q);a(q);var jt=r(q,1,!0);a(z),a(l),C(()=>{o(R,_(c).name),o(At,`${(_(c).bonus>0?"+"+_(c).bonus:_(c).bonus)??""} 🎯`),o(Rt,`${_(c).damage??""} 💥`),o(jt,_(c).note?_(c).note:"")}),m(n,l)}),a(v),a(i),m(s,i)};j(st,s=>{t.creature.attacks.length>0&&s(yt)})}var it=r(st,2);{var Mt=s=>{var i=aa(),v=r(e(i),2);k(v,21,()=>t.creature.actions,n=>n.name,(n,c)=>{var l=ta(),d=e(l);lt(d,{get action(){return _(c)}}),a(l),m(n,l)}),a(v),a(i),m(s,i)};j(it,s=>{t.creature.actions.length>0&&s(Mt)})}var vt=r(it,2);{var Ct=s=>{var i=ra(),v=r(e(i),2);k(v,21,()=>t.creature.reactions,n=>n.name,(n,c)=>{var l=ea(),d=e(l);lt(d,{get action(){return _(c)}}),a(l),m(n,l)}),a(v),a(i),m(s,i)};j(vt,s=>{t.creature.reactions.length>0&&s(Ct)})}var nt=r(vt,2),ot=r(e(nt),2),kt=e(ot,!0);a(ot),a(nt),a(N);var wt=r(N,2);{var St=s=>{var i=sa(),v=e(i);a(i),C(()=>{ct(v,"src",t.creature.img),ct(v,"alt",t.creature.name)}),m(s,i)};j(wt,s=>{t.creature.img&&s(St)})}a(at),a(y),a(h),C(s=>{o(ut,t.creature.name),o(dt,t.creature.na),o(_t,t.creature.stats.maxHealth),o(gt,`${t.creature.stats.evasion.value??""}${t.creature.stats.evasion.note?` (${t.creature.stats.evasion.note})`:""}`),o(mt,`${t.creature.stats.physicalMitigation.value??""}${t.creature.stats.physicalMitigation.note?` (${t.creature.stats.physicalMitigation.note})`:""}`),o(bt,`${t.creature.stats.magicalMitigation.value??""}${t.creature.stats.magicalMitigation.note?` (${t.creature.stats.magicalMitigation.note})`:""}`),o(ft,`${t.creature.stats.speed.value??""}${t.creature.stats.speed.note?` (${t.creature.stats.speed.note})`:""}`),o(xt,t.creature.attributes.reflexes),o(zt,s),o(kt,t.creature.behavior)},[()=>t.creature.languages.join(", ")]),m(p,h),Y()}qt(["click"]);const U=Ot([]),na=()=>({loadCreatures:async()=>{if(Ut(U).length>0)return;const u=await(await fetch(Ht("/docs/bestiary.yml"))).text();let g=[];try{g=Bt(u).creatures??[]}catch(f){console.error("Error parsing YAML:",f)}U.set(g.map(f=>Nt(f)).toSorted((f,x)=>f.na-x.na||f.name.localeCompare(x.name)))},creatures:U});var oa=b('<section class="svelte-uuivdv"><h1>Bestiario</h1> <div class="statblock-list svelte-uuivdv"></div></section>');function ha(p,t){V(t,!1);const u=()=>Lt(w,"$creatures",g),[g,f]=It(),{loadCreatures:x,creatures:w}=na();Dt(async()=>{await x()}),Et();var S=oa(),h=r(e(S),2);k(h,5,u,y=>y.id,(y,A)=>{va(y,{get creature(){return _(A)}})}),a(h),a(S),m(p,S),Y(),f()}export{ha as component};
