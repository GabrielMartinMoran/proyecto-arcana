import"../chunks/DsnmJJEf.js";import"../chunks/D0fuGuPo.js";import{o as z}from"../chunks/CzhoJcdv.js";import{p as A,f as v,aI as B,b as r,c as G,aJ as K,O as t,a6 as g,d as C,g as n,r as S,aH as I,a as h,t as L,e as P,s as Q}from"../chunks/DLXWS9Me.js";import{i as b}from"../chunks/sk9sCnVa.js";import{i as U}from"../chunks/DfGtoawc.js";import{g as q}from"../chunks/0JtrQ17s.js";import{u as W,S as X}from"../chunks/DCC-qXrn.js";import{R as Y}from"../chunks/Cy9XiZTD.js";import{a as Z,p as $,b as aa}from"../chunks/DDOa0yjM.js";/* empty css                */var ea=v('<meta name="viewport" content="width=device-width, initial-scale=1"/>'),ra=v('<div class="status svelte-uq3fho">Cargando criatura...</div>'),ta=v('<div class="status svelte-uq3fho"> </div>'),sa=v("<!> <!>",1),oa=v('<div class="status svelte-uq3fho">Criatura no disponible.</div>'),ia=v('<div class="page svelte-uq3fho"><!></div>');function ha(w,x){A(x,!1);const{loadCreatures:R,creatures:k}=W(),{isInsideFoundry:D,syncCreatureState:F}=aa();Z();let d,c=g(void 0),f=g(!0),s=g(null);const M=a=>{t(c,a),D()&&F(n(c))};z(async()=>{try{d=q($)?.params?.creatureId}catch{}if(t(f,!0),t(s,null),!d){t(f,!1),t(s,"ID de criatura inválida.");return}try{await R();const e=(q(k)||[]).find(u=>u&&(u.id===d||u.name===d));e?M(e):t(s,"No se encontró la criatura.")}catch(a){console.error("[bestiary-embed] error loading creatures",a),t(s,"Error al cargar el bestiario.")}finally{t(f,!1)}}),U();var p=ia();B(a=>{var e=ea();K.title="Creatura embebida",r(a,e)});var T=C(p);{var E=a=>{var e=ra();r(a,e)},H=a=>{var e=I(),u=h(e);{var J=o=>{var i=ta(),_=C(i,!0);S(i),L(()=>P(_,n(s))),r(o,i)},N=o=>{var i=I(),_=h(i);{var O=l=>{var m=sa(),y=h(m);X(y,{get creature(){return n(c)}});var j=Q(y,2);Y(j,{}),r(l,m)},V=l=>{var m=oa();r(l,m)};b(_,l=>{n(c)?l(O):l(V,!1)},!0)}r(o,i)};b(u,o=>{n(s)?o(J):o(N,!1)},!0)}r(a,e)};b(T,a=>{n(f)?a(E):a(H,!1)})}S(p),r(w,p),G()}export{ha as component};
