import"../chunks/DsnmJJEf.js";import"../chunks/BvBWPstY.js";import{o as B,h as G,s as H}from"../chunks/FRtchhGd.js";import{p as J,b as v,a as r,d as K,ac as L,Q as t,ad as g,e as C,h as n,r as S,c as q,f as h,t as O,g as P}from"../chunks/Cx9SZC40.js";import{i as b}from"../chunks/BQQjEHXb.js";import{i as U}from"../chunks/jOjA9dLA.js";import{g as w}from"../chunks/nYHX28hn.js";import{u as W,S as X}from"../chunks/BEA79oA8.js";import{R as Y}from"../chunks/DylWN1zM.js";import{a as Z,p as $,b as aa}from"../chunks/DjO2gEHc.js";var ea=v('<meta name="viewport" content="width=device-width, initial-scale=1"/>'),ra=v('<div class="status svelte-uq3fho">Cargando criatura...</div>'),ta=v('<div class="status svelte-uq3fho"> </div>'),sa=v("<!> <!>",1),oa=v('<div class="status svelte-uq3fho">Criatura no disponible.</div>'),ia=v('<div class="page svelte-uq3fho"><!></div>');function ga(I,x){J(x,!1);const{loadCreatures:R,creatures:k}=W(),{isInsideFoundry:D,syncCreatureState:F}=aa();Z();let u,c=g(void 0),f=g(!0),s=g(null);const M=a=>{t(c,a),D()&&F(n(c))};B(async()=>{try{u=w($)?.params?.creatureId}catch{}if(t(f,!0),t(s,null),!u){t(f,!1),t(s,"ID de criatura inválida.");return}try{await R();const e=(w(k)||[]).find(d=>d&&(d.id===u||d.name===u));e?M(e):t(s,"No se encontró la criatura.")}catch(a){console.error("[bestiary-embed] error loading creatures",a),t(s,"Error al cargar el bestiario.")}finally{t(f,!1)}}),U();var p=ia();G(a=>{var e=ea();L.title="Creatura embebida",r(a,e)});var T=C(p);{var E=a=>{var e=ra();r(a,e)},N=a=>{var e=q(),d=h(e);{var Q=o=>{var i=ta(),_=C(i,!0);S(i),O(()=>H(_,n(s))),r(o,i)},V=o=>{var i=q(),_=h(i);{var j=l=>{var m=sa(),y=h(m);X(y,{get creature(){return n(c)}});var A=P(y,2);Y(A,{}),r(l,m)},z=l=>{var m=oa();r(l,m)};b(_,l=>{n(c)?l(j):l(z,!1)},!0)}r(o,i)};b(d,o=>{n(s)?o(Q):o(V,!1)},!0)}r(a,e)};b(T,a=>{n(f)?a(E):a(N,!1)})}S(p),r(I,p),K()}export{ga as component};
