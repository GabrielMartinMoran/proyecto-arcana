import"../chunks/DsnmJJEf.js";import{o as D}from"../chunks/CzhoJcdv.js";import{aF as G,p as T,c as A,f as P,d as C,aG as $,s as h,r as F,t as y,g as t,b as w,e as I,a2 as R,N as L,am as M,O as b}from"../chunks/DLXWS9Me.js";import{e as N}from"../chunks/DqBPzmir.js";import{s as j,a as q}from"../chunks/9-vBrUj_.js";import{r as z}from"../chunks/BlEGOwK4.js";import{p as g}from"../chunks/BtKI8q5M.js";import{r as E,a as H,b as B}from"../chunks/YdHDDrJh.js";import{C as J}from"../chunks/QFUiQZjY.js";import{u as K,S as Q}from"../chunks/DsHTFQ4U.js";import{r as O}from"../chunks/BQL_5efD.js";var V=(n,r,a)=>r.onFiltersChange({...t(a),name:n.target.value}),W=(n,r,a)=>r.onFiltersChange({...t(a),tier:n.target.value}),X=P("<option> </option>"),Y=(n,r)=>r.onResetFilters(),Z=P('<div class="filters svelte-197x4u5"><input type="text" placeholder="Buscar por nombre" class="svelte-197x4u5"/> <select class="svelte-197x4u5"><option>Todos los Rangos</option><!></select> <button>Limpiar Filtros</button></div>');function ee(n,r){T(r,!0);let a=$(()=>r.filters);const x=()=>{const f=new Set(r.creatures.map(m=>m.tier));return Array.from(f).sort((m,l)=>m-l)};J(n,{children:(f,m)=>{var l=Z(),i=C(l);E(i),i.__input=[V,r,a];var s=h(i,2);s.__change=[W,r,a];var v=C(s);v.value=v.__value="";var S=h(v);N(S,16,x,p=>p,(p,c)=>{var e=X(),o=C(e);F(e);var u={};y(d=>{B(e,d),I(o,`Rango ${c??""}`),u!==(u=`${c}`)&&(e.value=e.__value=`${c}`)},[()=>t(a).tier===String(c)]),w(p,e)}),F(s);var _=h(s,2);_.__click=[Y,r],F(l),y(()=>{H(i,t(a).name),B(v,!t(a).tier)}),w(f,l)},$$slots:{default:!0}}),A()}G(["input","change","click"]);var te=P('<section class="svelte-uuivdv"><h1>Bestiario</h1> <!> <div class="statblock-list svelte-uuivdv"></div></section>');function pe(n,r){T(r,!0);const a=()=>q(l,"$creatures",x),[x,f]=j(),{loadCreatures:m,creatures:l}=K();let i=R(L(g.url.searchParams.get("name")??"")),s=R(L(g.url.searchParams.get("tier")??"")),v=$(()=>(a()||[]).filter(e=>{const o=O((t(i)||"").toLowerCase().trim()),u=O(e.name.toLowerCase()).includes(o),d=!t(s)||parseInt(t(s))===e.tier;return u&&d}));D(async()=>{await m()}),M(()=>{const e=new URLSearchParams(g.url.searchParams),o=(t(i)||"").trim(),u=(t(s)||"").trim();o?e.set("name",o):e.delete("name"),u?e.set("tier",u):e.delete("tier");const d=g.url.searchParams.toString(),k=e.toString();if(d===k)return;const U=`${g.url.pathname}${k?`?${k}`:""}`;z(U,{})});const S=()=>{b(i,""),b(s,"")};var _=te(),p=h(C(_),2);{let e=$(()=>({name:t(i),tier:t(s)}));ee(p,{get creatures(){return a()},get filters(){return t(e)},onFiltersChange:o=>{b(i,o.name,!0),b(s,o.tier,!0)},onResetFilters:S})}var c=h(p,2);N(c,21,()=>t(v),e=>e.id,(e,o)=>{Q(e,{get creature(){return t(o)}})}),F(c),F(_),w(n,_),A(),f()}export{pe as component};
