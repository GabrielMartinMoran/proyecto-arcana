import"../chunks/DsnmJJEf.js";import{d as j,s as I,o as M}from"../chunks/DDMpRfKd.js";import{p as A,d as D,b as P,e as C,ab as $,g as h,r as b,t as y,j as t,a as w,aa as R,D as L,a5 as N,F}from"../chunks/Cg1s0EoG.js";import{r as q,e as O,b as z,c as B}from"../chunks/CSZ0gJPW.js";import{s as E,a as G}from"../chunks/MZe84WCl.js";import{r as H}from"../chunks/BCisOs_b.js";import{p as g}from"../chunks/DPRm5G9v.js";import{C as J}from"../chunks/CV7z2rc6.js";import{S as K}from"../chunks/CxpBEg5v.js";import{u as Q}from"../chunks/Uh7NEplX.js";import{r as T}from"../chunks/CGjaQNWU.js";var V=(n,r,a)=>r.onFiltersChange({...t(a),name:n.target.value}),W=(n,r,a)=>r.onFiltersChange({...t(a),tier:n.target.value}),X=P("<option> </option>"),Y=(n,r)=>r.onResetFilters(),Z=P('<div class="filters svelte-197x4u5"><input type="text" placeholder="Buscar por nombre" class="svelte-197x4u5"/> <select class="svelte-197x4u5"><option>Todos los Rangos</option><!></select> <button>Limpiar Filtros</button></div>');function ee(n,r){A(r,!0);let a=$(()=>r.filters);const x=()=>{const d=new Set(r.creatures.map(m=>m.tier));return Array.from(d).sort((m,l)=>m-l)};J(n,{children:(d,m)=>{var l=Z(),i=C(l);q(i),i.__input=[V,r,a];var s=h(i,2);s.__change=[W,r,a];var v=C(s);v.value=v.__value="";var S=h(v);O(S,16,x,p=>p,(p,c)=>{var e=X(),o=C(e);b(e);var u={};y(f=>{B(e,f),I(o,`Rango ${c??""}`),u!==(u=`${c}`)&&(e.value=e.__value=`${c}`)},[()=>t(a).tier===String(c)]),w(p,e)}),b(s);var _=h(s,2);_.__click=[Y,r],b(l),y(()=>{z(i,t(a).name),B(v,!t(a).tier)}),w(d,l)},$$slots:{default:!0}}),D()}j(["input","change","click"]);var te=P('<section class="svelte-uuivdv"><h1>Bestiario</h1> <!> <div class="statblock-list svelte-uuivdv"></div></section>');function pe(n,r){A(r,!0);const a=()=>G(l,"$creatures",x),[x,d]=E(),{loadCreatures:m,creatures:l}=Q();let i=R(L(g.url.searchParams.get("name")??"")),s=R(L(g.url.searchParams.get("tier")??"")),v=$(()=>(a()||[]).filter(e=>{const o=T((t(i)||"").toLowerCase().trim()),u=T(e.name.toLowerCase()).includes(o),f=!t(s)||parseInt(t(s))===e.tier;return u&&f}));M(async()=>{await m()}),N(()=>{const e=new URLSearchParams(g.url.searchParams),o=(t(i)||"").trim(),u=(t(s)||"").trim();o?e.set("name",o):e.delete("name"),u?e.set("tier",u):e.delete("tier");const f=g.url.searchParams.toString(),k=e.toString();if(f===k)return;const U=`${g.url.pathname}${k?`?${k}`:""}`;H(U,{})});const S=()=>{F(i,""),F(s,"")};var _=te(),p=h(C(_),2);{let e=$(()=>({name:t(i),tier:t(s)}));ee(p,{get creatures(){return a()},get filters(){return t(e)},onFiltersChange:o=>{F(i,o.name,!0),F(s,o.tier,!0)},onResetFilters:S})}var c=h(p,2);O(c,21,()=>t(v),e=>e.id,(e,o)=>{K(e,{get creature(){return t(o)}})}),b(c),b(_),w(n,_),D(),d()}export{pe as component};
