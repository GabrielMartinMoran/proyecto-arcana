import"../chunks/DsnmJJEf.js";import"../chunks/DYkEFMcb.js";import{o as G,h as H,s as J}from"../chunks/DDMpRfKd.js";import{p as K,b as v,a as r,d as L,ac as O,F as t,ad as g,e as C,j as n,r as S,c as q,f as h,t as P,g as Q}from"../chunks/Cg1s0EoG.js";import{i as b}from"../chunks/MZe84WCl.js";import{i as U}from"../chunks/9Ega0Btb.js";import{g as w}from"../chunks/CDyK6DUB.js";import{S as W}from"../chunks/D59KR5KQ.js";import{R as X}from"../chunks/D0Jl2iZ1.js";import{u as Y}from"../chunks/BYLun5JT.js";import{a as Z,p as $,b as aa}from"../chunks/CIC3-VAl.js";var ea=v('<meta name="viewport" content="width=device-width, initial-scale=1"/>'),ra=v('<div class="status svelte-uq3fho">Cargando criatura...</div>'),ta=v('<div class="status svelte-uq3fho"> </div>'),sa=v("<!> <!>",1),oa=v('<div class="status svelte-uq3fho">Criatura no disponible.</div>'),ia=v('<div class="page svelte-uq3fho"><!></div>');function ha(I,x){K(x,!1);const{loadCreatures:F,creatures:R}=Y(),{isInsideFoundry:k,syncCreatureState:D}=aa();Z();let u,c=g(void 0),f=g(!0),s=g(null);const M=a=>{t(c,a),k()&&D(n(c))};G(async()=>{try{u=w($)?.params?.creatureId}catch{}if(t(f,!0),t(s,null),!u){t(f,!1),t(s,"ID de criatura inválida.");return}try{await F();const e=(w(R)||[]).find(d=>d&&(d.id===u||d.name===u));e?M(e):t(s,"No se encontró la criatura.")}catch(a){console.error("[bestiary-embed] error loading creatures",a),t(s,"Error al cargar el bestiario.")}finally{t(f,!1)}}),U();var p=ia();H(a=>{var e=ea();O.title="Creatura embebida",r(a,e)});var T=C(p);{var j=a=>{var e=ra();r(a,e)},E=a=>{var e=q(),d=h(e);{var N=o=>{var i=ta(),_=C(i,!0);S(i),P(()=>J(_,n(s))),r(o,i)},V=o=>{var i=q(),_=h(i);{var z=l=>{var m=sa(),y=h(m);W(y,{get creature(){return n(c)}});var B=Q(y,2);X(B,{}),r(l,m)},A=l=>{var m=oa();r(l,m)};b(_,l=>{n(c)?l(z):l(A,!1)},!0)}r(o,i)};b(d,o=>{n(s)?o(N):o(V,!1)},!0)}r(a,e)};b(T,a=>{n(f)?a(j):a(E,!1)})}S(p),r(I,p),L()}export{ha as component};
