import"../chunks/DsnmJJEf.js";import"../chunks/B9xErqrg.js";import{s as o,d as qt,o as Dt}from"../chunks/DEyIqfax.js";import{p as V,b,e,r as a,g as r,t as S,a as m,d as Y,j as _}from"../chunks/4UBXq5Sj.js";import{e as C,s as ut}from"../chunks/Z0ud6hNo.js";import{i as Et}from"../chunks/CwSwkGN2.js";import{i as q,s as It,a as Lt}from"../chunks/DY7lAt98.js";import{a as Ft,p as Pt}from"../chunks/CVSkhmb7.js";import{c as Tt,l as Bt}from"../chunks/CGjaQNWU.js";import{r as Ht}from"../chunks/Tt7jWNin.js";import{m as Nt}from"../chunks/DemwCk8g.js";import{w as Ot,g as Ut}from"../chunks/Cje6xDa-.js";var Vt=b('<div class="action"><strong> </strong> <span> </span></div>');function dt(f,t){V(t,!0);var u=Vt(),g=e(u),x=e(g);a(g);var p=r(g,2),k=e(p,!0);a(p),a(u),S(()=>{o(x,`${t.action.name??""}
		${t.action.uses?`(${t.action.uses.type=="USES"?`${t.action.uses.qty} ${t.action.uses.qty===1?"uso":"usos"}`:`Recarga ${t.action.uses.qty}+`})`:""}:`),o(k,t.action.detail)}),m(f,u),Y()}var Yt=(f,t,u,g)=>t(`1d6e+${u[g]}`,Tt(u[g])),Gt=b('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">🎲</button></div></div>'),Jt=(f,t)=>t("1d6e+reflejos","Iniciativa"),Kt=b("<li><strong> </strong> <span> </span></li>"),Qt=b('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),Wt=(f,t,u)=>t(_(u)),Xt=(f,t,u)=>t(_(u)),Zt=b('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),$t=b('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),ta=b("<li><!></li>"),aa=b('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),ea=b("<li><!></li>"),ra=b('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),sa=b('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span><strong>NA</strong> <span> </span></span></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigación Física</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigación Mágica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">🎲</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span> </span></div> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div></div></div></div>');function ia(f,t){V(t,!0);const u={body:"Cuerpo",reflexes:"Reflejos",mind:"Mente",instinct:"Instinto",presence:"Presencia"};let{rollModal:g,rollExpression:x}=Ft();const p=(s,i)=>{const n={Cuerpo:t.creature.attributes.body,Reflejos:t.creature.attributes.reflexes,Mente:t.creature.attributes.mind,Instinto:t.creature.attributes.instinct,Presencia:t.creature.attributes.presence,Iniciativa:t.creature.attributes.reflexes};for(const v of Object.keys(n))n[v.toLowerCase()]=n[v];g.openRollModal({expression:s,variables:n,title:`${t.creature.name}: ${i}`})},k=s=>{p(`1d6e+${s.bonus}`,`Ataca con ${s.name}`)},w=s=>{const i=Pt(s.damage);x({expression:i,title:`${t.creature.name}: Daño de ${s.name}`})};var h=sa(),y=r(e(h),2),A=e(y),D=e(A),_t=e(D,!0);a(D);var G=r(D,2),J=r(e(G),2),gt=e(J,!0);a(J),a(G),a(A);var E=r(A,2);C(E,20,()=>["body","reflexes","mind","instinct","presence"],s=>s,(s,i)=>{var n=Gt(),v=e(n),c=e(v,!0);a(v);var l=r(v,2),d=e(l),R=e(d,!0);a(d);var z=r(d,2);z.__click=[Yt,p,u,i],a(l),a(n),S(()=>{o(c,u[i]),o(R,t.creature.attributes[i])}),m(s,n)}),a(E);var I=r(E,2),L=e(I),K=r(e(L),2),mt=e(K,!0);a(K),a(L);var F=r(L,2),Q=r(e(F),2),bt=e(Q);a(Q),a(F);var P=r(F,2),W=r(e(P),2),ft=e(W);a(W),a(P);var T=r(P,2),X=r(e(T),2),xt=e(X);a(X),a(T);var B=r(T,2),Z=r(e(B),2),pt=e(Z);a(Z),a(B);var $=r(B,2),tt=r(e($),2),H=e(tt),zt=e(H,!0);a(H);var ht=r(H,2);ht.__click=[Jt,p],a(tt),a($),a(I);var at=r(I,2),N=e(at),O=e(N),et=r(e(O),2),yt=e(et,!0);a(et),a(O);var rt=r(O,2);{var Mt=s=>{var i=Qt(),n=r(e(i),2);C(n,21,()=>t.creature.traits,v=>v.name,(v,c)=>{var l=Kt(),d=e(l),R=e(d);a(d);var z=r(d,2),M=e(z,!0);a(z),a(l),S(()=>{o(R,`${_(c).name??""}:`),o(M,_(c).detail)}),m(v,l)}),a(n),a(i),m(s,i)};q(rt,s=>{t.creature.traits.length>0&&s(Mt)})}var st=r(rt,2);{var Ct=s=>{var i=$t(),n=r(e(i),2);C(n,21,()=>t.creature.attacks,v=>v.name,(v,c)=>{var l=Zt(),d=e(l),R=e(d,!0);a(d);var z=r(d,2),M=e(z);M.__click=[Wt,k,c];var Rt=e(M);a(M);var j=r(M,2);j.__click=[Xt,w,c];var St=e(j);a(j);var jt=r(j,1,!0);a(z),a(l),S(()=>{o(R,_(c).name),o(Rt,`${(_(c).bonus>0?"+"+_(c).bonus:_(c).bonus)??""} 🎯`),o(St,`${_(c).damage??""} 💥`),o(jt,_(c).note?_(c).note:"")}),m(v,l)}),a(n),a(i),m(s,i)};q(st,s=>{t.creature.attacks.length>0&&s(Ct)})}var it=r(st,2);{var kt=s=>{var i=aa(),n=r(e(i),2);C(n,21,()=>t.creature.actions,v=>v.name,(v,c)=>{var l=ta(),d=e(l);dt(d,{get action(){return _(c)}}),a(l),m(v,l)}),a(n),a(i),m(s,i)};q(it,s=>{t.creature.actions.length>0&&s(kt)})}var vt=r(it,2);{var wt=s=>{var i=ra(),n=r(e(i),2);C(n,21,()=>t.creature.reactions,v=>v.name,(v,c)=>{var l=ea(),d=e(l);dt(d,{get action(){return _(c)}}),a(l),m(v,l)}),a(n),a(i),m(s,i)};q(vt,s=>{t.creature.reactions.length>0&&s(wt)})}var nt=r(vt,2),ot=r(e(nt),2),At=e(ot,!0);a(ot),a(nt),a(N);var ct=r(N,2),lt=e(ct);a(ct),a(at),a(y),a(h),S(s=>{o(_t,t.creature.name),o(gt,t.creature.na),o(mt,t.creature.stats.maxHealth),o(bt,`${t.creature.stats.evasion.value??""}${t.creature.stats.evasion.note?` (${t.creature.stats.evasion.note})`:""}`),o(ft,`${t.creature.stats.physicalMitigation.value??""}${t.creature.stats.physicalMitigation.note?` (${t.creature.stats.physicalMitigation.note})`:""}`),o(xt,`${t.creature.stats.magicalMitigation.value??""}${t.creature.stats.magicalMitigation.note?` (${t.creature.stats.magicalMitigation.note})`:""}`),o(pt,`${t.creature.stats.speed.value??""}${t.creature.stats.speed.note?` (${t.creature.stats.speed.note})`:""}`),o(zt,t.creature.attributes.reflexes),o(yt,s),o(At,t.creature.behavior),ut(lt,"src",t.creature.img),ut(lt,"alt",t.creature.name)},[()=>t.creature.languages.join(", ")]),m(f,h),Y()}qt(["click"]);const U=Ot([]),va=()=>({loadCreatures:async()=>{if(Ut(U).length>0)return;const u=await(await fetch(Ht("/docs/bestiary.yml"))).text();let g=[];try{g=Bt(u).creatures??[]}catch(x){console.error("Error parsing YAML:",x)}U.set(g.map(x=>Nt(x)))},creatures:U});var na=b('<section class="svelte-uuivdv"><h1>Bestiario</h1> <div class="statblock-list svelte-uuivdv"></div></section>');function za(f,t){V(t,!1);const u=()=>Lt(k,"$creatures",g),[g,x]=It(),{loadCreatures:p,creatures:k}=va();Dt(async()=>{await p()}),Et();var w=na(),h=r(e(w),2);C(h,5,u,y=>y.id,(y,A)=>{ia(y,{get creature(){return _(A)}})}),a(h),a(w),m(f,w),Y(),x()}export{za as component};
