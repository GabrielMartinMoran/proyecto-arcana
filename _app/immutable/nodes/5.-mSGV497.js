import"../chunks/DsnmJJEf.js";import"../chunks/B9xErqrg.js";import{s as l,d as jt,o as qt}from"../chunks/DEyIqfax.js";import{p as V,b as m,e,r as a,g as r,t as R,a as _,d as Y,j as g}from"../chunks/4UBXq5Sj.js";import{e as A,s as ut}from"../chunks/Z0ud6hNo.js";import{i as Dt}from"../chunks/CwSwkGN2.js";import{i as C,s as Nt,a as Pt}from"../chunks/DY7lAt98.js";import{a as Ft,p as Lt}from"../chunks/CAzLw9M4.js";import{c as Ot,l as Bt}from"../chunks/CGjaQNWU.js";import{C as U}from"../chunks/B-kcpAHL.js";import{r as Gt}from"../chunks/CeSW2ldr.js";import{m as Ht}from"../chunks/B2QrTDi3.js";import{w as Ut,g as Vt}from"../chunks/Cje6xDa-.js";var Yt=m('<div class="action"><strong> </strong> <span> </span></div>');function G(f,t){V(t,!0);var d=Yt(),x=e(d),b=e(x);a(x);var h=r(x,2),k=e(h,!0);a(h),a(d),R(()=>{l(b,`${t.action.name??""}
		${t.action.uses?`(${t.action.uses.type=="USES"?`${t.action.uses.qty} ${t.action.uses.qty===1?"uso":"usos"}`:`Recarga ${t.action.uses.qty}+`})`:""}:`),l(k,t.action.detail)}),_(f,d),Y()}var Jt=(f,t,d)=>t(`1d6e+${U.ATTR_NAME_MAP[d]}`,Ot(U.ATTR_NAME_MAP[d])),Kt=m('<div class="attribute svelte-2zpvir"><strong> </strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">🎲</button></div></div>'),Qt=(f,t)=>t("1d6e+reflejos","Iniciativa"),Wt=m("<li><strong> </strong> <span> </span></li>"),Xt=m('<div class="traits"><strong>Rasgos</strong> <ul></ul></div>'),Zt=(f,t,d)=>t(g(d)),$t=(f,t,d)=>t(g(d)),ta=m('<li><strong> </strong> <span><button class="svelte-2zpvir"> </button> <button class="svelte-2zpvir"> </button> </span></li>'),aa=m('<div class="attacks svelte-2zpvir"><strong>Ataques</strong> <ul></ul></div>'),ea=m("<li><!></li>"),ra=m('<div class="actions"><strong>Acciones</strong> <ul></ul></div>'),sa=m("<li><!></li>"),ia=m('<div class="actions"><strong>Reacciones</strong> <ul></ul></div>'),va=m("<li><!></li>"),na=m('<div class="actions"><strong>Interacciones</strong> <ul></ul></div>'),oa=m('<div class="right svelte-2zpvir"><img class="svelte-2zpvir"/></div>'),ca=m('<div class="statblock svelte-2zpvir"><div class="bg svelte-2zpvir"></div> <div class="data svelte-2zpvir"><div class="header svelte-2zpvir"><h2> </h2> <span><strong>NA</strong> <span> </span></span></div> <div class="attributes svelte-2zpvir"></div> <div class="stats svelte-2zpvir"><div class="attribute svelte-2zpvir"><strong>Salud</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Esquiva</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigación Física</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Mitigación Mágica</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Velocidad</strong> <span> </span></div> <div class="attribute svelte-2zpvir"><strong>Iniciativa</strong> <div class="score svelte-2zpvir"><span> </span> <button title="Tirar" class="svelte-2zpvir">🎲</button></div></div></div> <div class="middle svelte-2zpvir"><div class="left svelte-2zpvir"><div class="languages"><strong>Lenguas</strong> <span> </span></div> <!> <!> <!> <!> <!> <div class="behavior"><strong>Comportamiento:</strong> <span> </span></div></div> <!></div></div></div>');function la(f,t){V(t,!0);let{rollModal:d,rollExpression:x}=Ft();const b=(s,i)=>{const v={Cuerpo:t.creature.attributes.body,Reflejos:t.creature.attributes.reflexes,Mente:t.creature.attributes.mind,Instinto:t.creature.attributes.instinct,Presencia:t.creature.attributes.presence,Iniciativa:t.creature.attributes.reflexes};for(const n of Object.keys(v))v[n.toLowerCase()]=v[n];d.openRollModal({expression:s,variables:v,title:`${t.creature.name}: ${i}`})},h=s=>{b(`1d6e+${s.bonus}`,`Ataca con ${s.name}`)},k=s=>{const i=Lt(s.damage);x({expression:i,title:`${t.creature.name}: Daño de ${s.name}`})};var z=ca(),w=r(e(z),2),p=e(w),E=e(p),dt=e(E,!0);a(E);var J=r(E,2),K=r(e(J),2),_t=e(K,!0);a(K),a(J),a(p);var I=r(p,2);A(I,20,()=>["body","reflexes","mind","instinct","presence"],s=>s,(s,i)=>{var v=Kt(),n=e(v),c=e(n,!0);a(n);var o=r(n,2),u=e(o),S=e(u,!0);a(u);var M=r(u,2);M.__click=[Jt,b,i],a(o),a(v),R(()=>{l(c,U.ATTR_NAME_MAP[i]),l(S,t.creature.attributes[i])}),_(s,v)}),a(I);var j=r(I,2),q=e(j),Q=r(e(q),2),gt=e(Q,!0);a(Q),a(q);var D=r(q,2),W=r(e(D),2),mt=e(W);a(W),a(D);var N=r(D,2),X=r(e(N),2),bt=e(X);a(X),a(N);var P=r(N,2),Z=r(e(P),2),ft=e(Z);a(Z),a(P);var F=r(P,2),$=r(e(F),2),xt=e($);a($),a(F);var tt=r(F,2),at=r(e(tt),2),L=e(at),ht=e(L,!0);a(L);var zt=r(L,2);zt.__click=[Qt,b],a(at),a(tt),a(j);var et=r(j,2),O=e(et),B=e(O),rt=r(e(B),2),pt=e(rt,!0);a(rt),a(B);var st=r(B,2);{var Mt=s=>{var i=Xt(),v=r(e(i),2);A(v,21,()=>t.creature.traits,n=>n.name,(n,c)=>{var o=Wt(),u=e(o),S=e(u);a(u);var M=r(u,2),y=e(M,!0);a(M),a(o),R(()=>{l(S,`${g(c).name??""}:`),l(y,g(c).detail)}),_(n,o)}),a(v),a(i),_(s,i)};C(st,s=>{t.creature.traits.length>0&&s(Mt)})}var it=r(st,2);{var At=s=>{var i=aa(),v=r(e(i),2);A(v,21,()=>t.creature.attacks,n=>n.name,(n,c)=>{var o=ta(),u=e(o),S=e(u,!0);a(u);var M=r(u,2),y=e(M);y.__click=[Zt,h,c];var St=e(y);a(y);var T=r(y,2);T.__click=[$t,k,c];var Tt=e(T);a(T);var It=r(T,1,!0);a(M),a(o),R(()=>{l(S,g(c).name),l(St,`${(g(c).bonus>0?"+"+g(c).bonus:g(c).bonus)??""} 🎯`),l(Tt,`${g(c).damage??""} 💥`),l(It,g(c).note?g(c).note:"")}),_(n,o)}),a(v),a(i),_(s,i)};C(it,s=>{t.creature.attacks.length>0&&s(At)})}var vt=r(it,2);{var yt=s=>{var i=ra(),v=r(e(i),2);A(v,21,()=>t.creature.actions,n=>n.name,(n,c)=>{var o=ea(),u=e(o);G(u,{get action(){return g(c)}}),a(o),_(n,o)}),a(v),a(i),_(s,i)};C(vt,s=>{t.creature.actions.length>0&&s(yt)})}var nt=r(vt,2);{var Ct=s=>{var i=ia(),v=r(e(i),2);A(v,21,()=>t.creature.reactions,n=>n.name,(n,c)=>{var o=sa(),u=e(o);G(u,{get action(){return g(c)}}),a(o),_(n,o)}),a(v),a(i),_(s,i)};C(nt,s=>{t.creature.reactions.length>0&&s(Ct)})}var ot=r(nt,2);{var Rt=s=>{var i=na(),v=r(e(i),2);A(v,21,()=>t.creature.interactions,n=>n.name,(n,c)=>{var o=va(),u=e(o);G(u,{get action(){return g(c)}}),a(o),_(n,o)}),a(v),a(i),_(s,i)};C(ot,s=>{t.creature.interactions.length>0&&s(Rt)})}var ct=r(ot,2),lt=r(e(ct),2),kt=e(lt,!0);a(lt),a(ct),a(O);var wt=r(O,2);{var Et=s=>{var i=oa(),v=e(i);a(i),R(()=>{ut(v,"src",t.creature.img),ut(v,"alt",t.creature.name)}),_(s,i)};C(wt,s=>{t.creature.img&&s(Et)})}a(et),a(w),a(z),R(s=>{l(dt,t.creature.name),l(_t,t.creature.na),l(gt,t.creature.stats.maxHealth),l(mt,`${t.creature.stats.evasion.value??""}${t.creature.stats.evasion.note?` (${t.creature.stats.evasion.note})`:""}`),l(bt,`${t.creature.stats.physicalMitigation.value??""}${t.creature.stats.physicalMitigation.note?` (${t.creature.stats.physicalMitigation.note})`:""}`),l(ft,`${t.creature.stats.magicalMitigation.value??""}${t.creature.stats.magicalMitigation.note?` (${t.creature.stats.magicalMitigation.note})`:""}`),l(xt,`${t.creature.stats.speed.value??""}${t.creature.stats.speed.note?` (${t.creature.stats.speed.note})`:""}`),l(ht,t.creature.attributes.reflexes),l(pt,s),l(kt,t.creature.behavior)},[()=>t.creature.languages.join(", ")]),_(f,z),Y()}jt(["click"]);const H=Ut([]),ua=()=>({loadCreatures:async()=>{if(Vt(H).length>0)return;const d=await(await fetch(Gt("/docs/bestiary.yml"))).text();let x=[];try{x=Bt(d).creatures??[]}catch(b){console.error("Error parsing YAML:",b)}H.set(x.map(b=>Ht(b)).toSorted((b,h)=>b.na-h.na||b.name.localeCompare(h.name)))},creatures:H});var da=m('<section class="svelte-uuivdv"><h1>Bestiario</h1> <div class="statblock-list svelte-uuivdv"></div></section>');function Ra(f,t){V(t,!1);const d=()=>Pt(k,"$creatures",x),[x,b]=Nt(),{loadCreatures:h,creatures:k}=ua();qt(async()=>{await h()}),Dt();var z=da(),w=r(e(z),2);A(w,5,d,p=>p.id,(p,E)=>{la(p,{get creature(){return g(E)}})}),a(w),a(z),_(f,z),Y(),b()}export{Ra as component};
